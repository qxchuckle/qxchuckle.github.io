<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><script>if ('serviceWorker' in navigator) {
  //- if (Number(window.localStorage.getItem('ChenBlogHelper_Set')) < 1) {
  //-   (async()=>{window.stop()})()
  //-   window.localStorage.setItem('ChenBlogHelper_Set', 1)
  //- }
  //- navigator.serviceWorker.register('/giggles.js')
  //-   .then(async () => {
  //-     if (Number(window.localStorage.getItem('ChenBlogHelper_Set')) < 2) {
  //-       window.localStorage.setItem('ChenBlogHelper_Set', 2)
  //-       setTimeout(() => {
  //-         window.location.reload()
  //-       }, 150)
  //-     }
  //-   })
  // å¸è½½æ‰€æœ‰ Service Worker
  navigator.serviceWorker.getRegistrations().then(function(registrations) {
    for(let registration of registrations) {
      registration.unregister().then(function(success) {
        if (success) {
          console.log('Service Worker å·²æˆåŠŸå¸è½½');
        }
      });
    }
  });
  // æ¸…é™¤ç›¸å…³çš„ localStorage
  window.localStorage.removeItem('ChenBlogHelper_Set');
}
//- function setQXCookies(obj, limitTime, customDomain) {
//-     let data = new Date(new Date().getTime() + limitTime * 24 * 60 * 60 * 1000).toGMTString();
//-     for (let i in obj) {
//-       document.cookie = i + '=' + obj[i] + ';expires=' + data + ';domain=' + customDomain;
//-     }
//- }
//- function getQXCookie(name) {
//-     var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
//-     if (arr = document.cookie.match(reg))
//-         return decodeURIComponent(arr[2]);
//-     else
//-         return null;
//- }
//- if(getQXCookie('qcqx')!=="chuckle"){
//-   setQXCookies({ qcqx: 'chuckle' }, 365, 'qcqx.cn');
//- }else{
//-   console.log("qcqx");
//- }</script><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>React-è®°-1 | è½»ç¬‘Chuckle</title><meta name="keywords" content="å‰ç«¯,React"><meta name="author" content="ã€è½»ç¬‘Chuckleã€"><meta name="copyright" content="ã€è½»ç¬‘Chuckleã€"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="baidu-site-verification" content="codeva-BLXfA46XrF"><meta name="description" content="å†™ tsx æœ‰äº›çˆ½çš„ï¼Œå­¦ä¸€å­¦è¿™ React">
<meta property="og:type" content="article">
<meta property="og:title" content="React-è®°-1">
<meta property="og:url" content="https://www.qcqx.cn/article/cb488cbf.html">
<meta property="og:site_name" content="è½»ç¬‘Chuckle">
<meta property="og:description" content="å†™ tsx æœ‰äº›çˆ½çš„ï¼Œå­¦ä¸€å­¦è¿™ React">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.qcqx.cn/images/104-0.webp">
<meta property="article:published_time" content="2024-09-23T13:15:26.000Z">
<meta property="article:modified_time" content="2024-09-23T13:15:26.000Z">
<meta property="article:author" content="ã€è½»ç¬‘Chuckleã€">
<meta property="article:tag" content="å‰ç«¯">
<meta property="article:tag" content="React">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.qcqx.cn/images/104-0.webp"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/head.webp"><link rel="canonical" href="https://www.qcqx.cn/article/cb488cbf"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/css/index.css?285"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/css/fontawesome.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/css/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.json","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":160},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'React-è®°-1',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-23 21:15:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/css/tag_plugins.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.1"><link rel="alternate" href="/atom.xml" title="è½»ç¬‘Chuckle" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/head.webp" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/head.webp"/></div></div><div id="web_bg"></div><div id="svg_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="is-center" id="sidebar-avatar"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/head.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/404.gif'" alt="avatar"/></div><div class="author-info__name">ã€è½»ç¬‘Chuckleã€</div><div class="author-info__description">æ¼«å¤©å€¾å°˜ é£ä¸­è½»ç¬‘</div></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">88</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">32</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">6</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/qxchuckle"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="menu-info-social-icons is-center"><a class="social-icon" href="https://blog.csdn.net/qxchuckle" target="_blank" title="CSDN"><i class="iconfont icon-csdn"></i></a><a class="social-icon" href="https://gitee.com/qxchuckle" target="_blank" title="Gitee"><i class="iconfont icon-gitee"></i></a><a class="social-icon" href="https://space.bilibili.com/353049313" target="_blank" title="bilibili"><i class="iconfont icon-bilibili"></i></a><a class="social-icon" href="https://music.163.com/#/user/home?id=1395730595" target="_blank" title="ç½‘æ˜“äº‘"><i class="iconfont icon-wangyiyunyinle"></i></a><a class="social-icon" href="http://www.coolapk.com/u/4137393" target="_blank" title="é…·å®‰"><i class="iconfont icon-kuan"></i></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-zhuye"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-wenzhang"></i><span> åšæ–‡</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-bendiwenjianjia"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-fenlei1"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-biaoqian1"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="javascript:toRandomPost();"><i class="fa-fw iconfont icon-suijiceliang"></i><span> éšæœºæ–‡ç« </span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw iconfont icon-tongji"></i><span> ç»Ÿè®¡</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-_lianjie"></i><span> ç©ºé—´</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw iconfont icon-lianjie"></i><span> å‹é“¾</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw iconfont icon-pengyouquan"></i><span> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child" href="/bb/"><i class="fa-fw iconfont icon-shejiao"></i><span> å“”å“”</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-fasong-"></i><span> å…¶å®ƒ</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/update/"><i class="fa-fw iconfont icon-yuangongrizhi"></i><span> æ—¥å¿—</span></a></li><li><a class="site-page child" href="/agreement/"><i class="fa-fw iconfont icon-yinsixieyi"></i><span> åè®®</span></a></li><li><a class="site-page child" href="/atom.xml" target="_blank"><i class="fa-fw iconfont icon-RSS"></i><span> RSS</span></a></li><li><a class="site-page child" href="/sitemap.xml" target="_blank"><i class="fa-fw iconfont icon-ditu"></i><span> Sitemap</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw iconfont icon-liuyanban"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-aixin"></i><span> å…³äºæˆ‘</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><div id="nav-group"><div id="chuckle_home"><div class="back-home-button"><i class="back-home-button-icon fas fa-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">ä¼ é€é—¨</div><div class="back-menu-list"><a class="back-menu-item" href="/" title="å‰å¾€åšå®¢ä¸»é¡µ" target="_blank"><img class="back-menu-item-icon entered loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/head.webp" loading="lazy"/><span class="back-menu-item-text">åšå®¢ä¸»é¡µ</span></a><a class="back-menu-item" href="https://waline.qcqx.cn/ui" rel="external nofollow" title="å‰å¾€è¯„è®ºåç«¯" target="_blank"><img class="back-menu-item-icon entered loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/c4.webp" loading="lazy"/><span class="back-menu-item-text">è¯„è®ºç®¡ç†</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">åšå®¢çº¿è·¯</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.qcqx.cn/" title="å‰å¾€åšå®¢ä¸»ç«™" target="_blank" rel="noopener nofollow"><img class="back-menu-item-icon entered loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/h4.webp" loading="lazy"/><span class="back-menu-item-text">ä¸»åŸŸåçº¿è·¯</span></a><a class="back-menu-item" href="https://qxchuckle.github.io" title="å‰å¾€åšå®¢Githubçº¿è·¯" target="_blank" rel="noopener nofollow"><img class="back-menu-item-icon entered loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/c6.webp" loading="lazy"/><span class="back-menu-item-text">Githubçº¿è·¯</span></a></div></div></div></div></div><span id="blog_name"><a id="site-name" href="/">è½»ç¬‘Chuckle</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-zhuye"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-wenzhang"></i><span> åšæ–‡</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-bendiwenjianjia"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-fenlei1"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-biaoqian1"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="javascript:toRandomPost();"><i class="fa-fw iconfont icon-suijiceliang"></i><span> éšæœºæ–‡ç« </span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw iconfont icon-tongji"></i><span> ç»Ÿè®¡</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-_lianjie"></i><span> ç©ºé—´</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw iconfont icon-lianjie"></i><span> å‹é“¾</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw iconfont icon-pengyouquan"></i><span> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child" href="/bb/"><i class="fa-fw iconfont icon-shejiao"></i><span> å“”å“”</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-fasong-"></i><span> å…¶å®ƒ</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/update/"><i class="fa-fw iconfont icon-yuangongrizhi"></i><span> æ—¥å¿—</span></a></li><li><a class="site-page child" href="/agreement/"><i class="fa-fw iconfont icon-yinsixieyi"></i><span> åè®®</span></a></li><li><a class="site-page child" href="/atom.xml" target="_blank"><i class="fa-fw iconfont icon-RSS"></i><span> RSS</span></a></li><li><a class="site-page child" href="/sitemap.xml" target="_blank"><i class="fa-fw iconfont icon-ditu"></i><span> Sitemap</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw iconfont icon-liuyanban"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-aixin"></i><span> å…³äºæˆ‘</span></a></div></div><div id="buttons"><div id="switch-bg"><a class="site-page social-icon search" href="javascript:;" rel="noopener external nofollow" onclick="toggleWinbox()" title="åˆ‡æ¢èƒŒæ™¯-æ¢ä¸€ç§æ„Ÿè§‰ã€‚"><i class="fas fa-images fa-fw"></i></a></div><div id="switch-darkmode"><a class="site-page social-icon" onclick="kk.switchDarkMode()" title="åˆ‡æ¢æ¨¡å¼"><i class="fas fa-adjust fa-fw"></i></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info" style="background-image: url('https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/104-0.webp')"><div id="post-meta-top"><span class="post-categories"><i class="iconfont icon-fenlei fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">å­¦ä¹ ç¬”è®°</a></span><span class="post-tags"><a class="post-meta-tags" href="/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><a class="post-meta-tags" href="/tags/React/">React</a></span></div><h1 class="post-title">React-è®°-1<a class="post-share" id="share-post" href="javascript:;" rel="noopener external nofollow" onclick="kk.postURL()"><i class="fa fa-share-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="iconfont icon-shalou fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-09-23T13:15:26.000Z" title="å‘è¡¨äº 2024-09-23 21:15:26">2024-09-23</time></span><span class="post-meta-date"><i class="iconfont icon-gengxin fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-09-23T13:15:26.000Z" title="æ›´æ–°äº 2024-09-23 21:15:26">2024-09-23</time></span></div><div class="meta-secondline"><span class="post-meta-wordcount"><i class="iconfont icon-tongji1 fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">6.6k</span></span><span class="post-meta-wordcount"><i class="iconfont icon-tubiaozhizuomoban- fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>26åˆ†é’Ÿ</span></span><span class="leancloud_visitors" id="/article/cb488cbf.html" data-flag-title="React-è®°-1"><i class="iconfont icon-yanjing fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-commentcount"><i class="iconfont icon-pinglun fa-fw post-meta-icon"></i><span class="post-meta-label">è¯„è®ºæ•°:</span><a href="/article/cb488cbf.html#post-comment"><span class="waline-comment-count" id="/article/cb488cbf.html"></span></a></span></div></div></div><article class="post-content" id="article-container"><div class="Copyright-Notice" id="Copyright-Notice"><div id="post-Copyright-bar"></div><div id="Copyright-box"><span>æœ¬ç«™åšæ–‡æœªåœ¨ä»»ä½•å¹³å°</span><span class="copyright-phone-none">ä»¥ä»»ä½•å½¢å¼</span><span>å”®å–ï¼Œè¯¦æƒ…:</span><a href="/agreement/">åè®®</a></div></div><div class="post-series"><div class="post-series-title"> <span class="arrowhead">â–¸</span><span>React å­¦ä¹ ç¬”è®°-ç³»åˆ—</span></div><div class="post-series-box"><script>if(1){
let series_title=document.querySelector('.post-series-title')
let arrowhead=document.querySelector('.arrowhead')
var arrowhead_n = 1;
series_title.addEventListener('click',function(){
    let content=document.querySelector('.post-series-box')
    content.classList.toggle("show")
    if(arrowhead_n){
      arrowhead.innerHTML = "â–¾"
      arrowhead_n = 0
    }else{
      arrowhead.innerHTML = "â–¸"
      arrowhead_n = 1
    }
})
}</script><div class="post-series-item"><a class="title" href="/article/cb488cbf.html" title="React-è®°-1">React-è®°-1</a></div><div class="post-series-item"><a class="title" href="/article/f17dfea3.html" title="React-è®°-2">React-è®°-2</a></div><div class="post-series-item"><a class="title" href="/article/55cefeb1.html" title="React-è®°-3">React-è®°-3</a></div></div></div><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><a target="_blank" rel="noopener" href="https://react.dev/">React</a>ã€<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/">zh-hans</a></p>
<h1 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm create vite@latest</span><br><span class="line"><span class="meta"># </span><span class="language-bash">npm init vite@latest</span></span><br></pre></td></tr></table></figure>
<p><strong>é¡¹ç›®ç»“æ„ï¼š</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€â”€ğŸ“ public/ # é™æ€èµ„æºç›®å½•ï¼Œç›´æ¥å¤åˆ¶åˆ°æœ€ç»ˆçš„æ„å»ºè¾“å‡ºç›®å½•</span><br><span class="line">â”œâ”€â”€â”€ğŸ“ src/</span><br><span class="line">â”‚   â”œâ”€â”€â”€ğŸ“ assets/ # å­˜æ”¾é¡¹ç›®ä¸­éœ€è¦æ„å»ºã€æ‰“åŒ…çš„èµ„æºæ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€â”€ğŸ“„ App.css</span><br><span class="line">â”‚   â”œâ”€â”€â”€ğŸ“„ App.tsx # App ç»„ä»¶ï¼Œé€šå¸¸ä½œä¸ºæ ¹ç»„ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€â”€ğŸ“„ index.css</span><br><span class="line">â”‚   â”œâ”€â”€â”€ğŸ“„ main.tsx # å…¥å£ tsx æ–‡ä»¶ï¼Œç±»ä¼¼ Vue çš„ main.js</span><br><span class="line">â”‚   â””â”€â”€â”€ğŸ“„ vite-env.d.ts # ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œä¸‰æ–œçº¿å¼•å…¥äº† vite/client å£°æ˜ï¼Œåšäº†å„ç§æ–‡ä»¶åç¼€çš„ç±»å‹å£°æ˜ã€‚</span><br><span class="line">â”œâ”€â”€â”€ğŸ“„ .gitignore</span><br><span class="line">â”œâ”€â”€â”€ğŸ“„ eslint.config.js</span><br><span class="line">â”œâ”€â”€â”€ğŸ“„ index.html # vite å…¥å£æ–‡ä»¶ index.htmlï¼Œæ‹¦æˆª /src/main.tsx çš„å¼•å…¥</span><br><span class="line">â”œâ”€â”€â”€ğŸ“„ package.json</span><br><span class="line">â”œâ”€â”€â”€ğŸ“„ pnpm-lock.yaml</span><br><span class="line">â”œâ”€â”€â”€ğŸ“„ README.md</span><br><span class="line">â”œâ”€â”€â”€ğŸ“„ tsconfig.app.json # æºç  tsconfig</span><br><span class="line">â”œâ”€â”€â”€ğŸ“„ tsconfig.json</span><br><span class="line">â”œâ”€â”€â”€ğŸ“„ tsconfig.node.json # node ç¯å¢ƒ tsconfig</span><br><span class="line">â””â”€â”€â”€ğŸ“„ vite.config.ts</span><br></pre></td></tr></table></figure>
<h1 id="JSX-amp-TSX-ç®€ä»‹"><a href="#JSX-amp-TSX-ç®€ä»‹" class="headerlink" title="JSX &amp; TSX ç®€ä»‹"></a>JSX &amp; TSX ç®€ä»‹</h1><p>å°±åƒ Vue æœ‰ <code>.vue</code> æ–‡ä»¶ï¼ŒReact ä¹Ÿåˆ›é€ äº†ä¸€ç§æ–°çš„æ–‡ä»¶ç±»å‹ <code>.jsx</code>(<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/writing-markup-with-jsx">JavaScript XML</a>)ã€‚</p>
<blockquote>
<p>JSX å¹¶ä¸ä»…ä¸º React æœåŠ¡ï¼Œå…¶è¯­æ³•æ²¡æœ‰å®šä¹‰è¿è¡Œæ—¶è¯­ä¹‰ï¼Œä½¿å¾—å®ƒ<strong>èƒ½è¢«ç¼–è¯‘æˆå„ç§ä¸åŒçš„è¾“å‡ºå½¢å¼</strong>ã€‚Vue ä¹Ÿèƒ½ä½¿ç”¨ JSX(<a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/extras/render-function#jsx-tsx">æ–‡æ¡£</a>)ï¼Œä½†è¯­æ³•å’Œ React ç•¥æœ‰ä¸åŒï¼Œç¼–è¯‘ä¹Ÿéœ€è¦ç‹¬ç‰¹çš„æ’ä»¶ <a target="_blank" rel="noopener" href="https://github.com/vuejs/babel-plugin-jsx">@vue/babel-plugin-jsx</a>ã€‚ç›¸å…³æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://zh-hans.legacy.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html">Whatâ€™s a JSX Transform?</a>ã€‚åæ–‡ä»…èŠ JSX in Reactã€‚</p>
</blockquote>
<p>JSX è¢«è®¾è®¡ä¸º JS çš„<strong>è¯­æ³•æ‰©å±•</strong>ï¼Œå¯ä»¥åœ¨ JS ä¸­ç›´æ¥å†™ XML(HTML) æ ‡ç­¾ï¼Œå’Œå¤§å¤šæ•°ç±» JS æ¨¡æ¿æ–‡ä»¶ä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºäº†å°†<strong>æ¸²æŸ“é€»è¾‘</strong>å’Œ<strong>æ ‡ç­¾(è§†å›¾)</strong>å­˜äºåŒä¸€ä¸ªåœ°æ–¹ï¼Œç‹¬ç«‹æˆä¸º<strong>ç»„ä»¶</strong>ï¼Œæ‰¿è½½äº† HTML æ„å»ºé¡µé¢çš„èŒè´£ã€‚</p>
<p>æ­¤å¤–ï¼ŒIDE å¯¹ JSX æ”¯æŒè¾ƒå¥½ï¼ŒVSCode å¼€ç®±å³ç”¨åœ°æ”¯æŒ React(<a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/nodejs/reactjs-tutorial">æ–‡æ¡£</a>)ï¼Œè€Œæ— éœ€é¢å¤–å®‰è£…è¯­è¨€æ”¯æŒæ’ä»¶ï¼Œ<del>Vue+TS+Volarï¼Œå¼€å‘æ€§èƒ½ï¼Œemmmï¼Œæœ‰ç‚¹åƒåŠ›</del>ã€‚</p>
<h2 id="JSX-ä¸-React"><a href="#JSX-ä¸-React" class="headerlink" title="JSX ä¸ React"></a>JSX ä¸ React</h2><p><strong>viteæ’ä»¶ï¼š</strong><br><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@vitejs/plugin-react">@vitejs/plugin-react</a> é»˜è®¤ä½¿ç”¨ babel å¹³å°è½¬æ¢ç¼–è¯‘ JSX æ–‡ä»¶ã€‚<br>ä¹Ÿå¯ä»¥ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@vitejs/plugin-react-swc">@vitejs/plugin-react-swc</a> é€šè¿‡ swc å¹³å°ç¼–è¯‘ã€‚</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.babeljs.cn/">babel</a> æ˜¯ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨ï¼Œå®ƒå°† JS ä»£ç è½¬ä¸º AST æŠ½è±¡è¯­æ³•æ ‘ï¼Œå¹¶æ ¹æ®é…ç½®è§„åˆ™è½¬æ¢ã€ç”Ÿæˆç›®æ ‡ JS ä»£ç ï¼Œä¾‹å¦‚å°† ES6 è½¬ä¸º ES5 è¯­æ³•ï¼Œé€šè¿‡ Polyfill å«ç‰‡æ–¹å¼æ”¯æŒæ–°ç‰¹æ€§ï¼Œå°† JSX è½¬ä¸º React.createElement ç­‰å‡½æ•°è°ƒç”¨ã€‚<br><a target="_blank" rel="noopener" href="https://swc.rs/">swc</a> æ˜¯åŸºäº Rust çš„ web å¯æ‰©å±•å¹³å°ï¼Œæ—¢æœ‰ babel çš„ç¼–è¯‘è½¬æ¢åŠŸèƒ½ï¼Œä¹Ÿå¯ç”¨äºæ‰“åŒ…ï¼ˆå»ºè®¾ä¸­ï¼‰ï¼ŒåŸç”Ÿæ”¯æŒ TSï¼Œé€Ÿåº¦æ¯” babel å¿«å¾ˆå¤šï¼Œé…ç½®ä¹Ÿæ›´åŠ ç®€å•ã€‚<br>è¿™ä¸¤ä¸ªä¸œè¥¿ä»¥åå†å¼€ä¸ªæ–‡ç« å­¦å­¦ã€‚</p>
</blockquote>
<p><strong>babel æ’ä»¶ï¼š</strong><br>JSX çš„è¯­æ³•å®ç°ä¾èµ–ä¸¤ä¸ª babel æ’ä»¶ï¼š<br><a target="_blank" rel="noopener" href="https://babeljs.io/docs/babel-plugin-syntax-jsx">@babel/plugin-syntax-jsx</a> ä½¿ babel èƒ½å¤Ÿè§£æ JSX è¯­æ³•ã€‚<br><a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-plugin-transform-react-jsx">@babel/plugin-transform-react-jsx</a> è½¬æ¢ JSX è¯­æ³•ï¼Œå†…éƒ¨å·²ç»è°ƒç”¨äº† plugin-syntax-jsxã€‚å…è®¸è‡ªå®šä¹‰é…ç½®å°† JSX ç¼–è¯‘ä¸ºå“ªä¸ªå‡½æ•°è°ƒç”¨ï¼Œé»˜è®¤ä¸º <code>React.createElement</code> æˆ– <code>_jsx</code>ï¼ˆ17ä¹‹åï¼‰ã€‚</p>
<p><strong>è½¬æ¢å˜åŒ–ï¼š</strong><br>åœ¨ React 17 ä¹‹å‰ï¼ŒJSX ä¸­çš„å…ƒç´ èŠ‚ç‚¹ä¼šè¢«ç¼–è¯‘æˆ <code>React.createElement</code> å‡½æ•°è°ƒç”¨ï¼Œæ‰€ä»¥å³ä½¿æ²¡æœ‰ä½¿ç”¨åˆ° Reactï¼Œä¹Ÿéœ€è¦åœ¨æºç ä¸­å¼•å…¥å®ƒã€‚<br>è€Œåœ¨ React 17 ä¹‹åï¼Œ<a target="_blank" rel="noopener" href="https://zh-hans.legacy.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html">ä»‹ç»å…¨æ–°çš„ JSX è½¬æ¢</a>ï¼Œå°†è½¬æ¢ä¸º <code>_jsx</code> å‡½æ•°è°ƒç”¨ï¼Œå¹¶åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨å¼•å…¥ <strong>_jsxRuntime api</strong>ã€‚</p>
<blockquote>
<p>æœ¬è´¨ä¸Š JSX åªæ˜¯ React å‡½æ•°çš„è¯­æ³•ç³–ï¼ŒReact æœ¬èº«å¹¶ä¸ä¾èµ– JSXï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨ <code>React.createElement</code> å‡½æ•°æ‰‹åŠ¨åˆ›å»º React å…ƒç´ èŠ‚ç‚¹ã€‚</p>
</blockquote>
<h2 id="åˆè¯†-React-ç»„ä»¶"><a href="#åˆè¯†-React-ç»„ä»¶" class="headerlink" title="åˆè¯† React ç»„ä»¶"></a>åˆè¯† React ç»„ä»¶</h2><p>React åº”ç”¨é€šè¿‡<strong>ç»„ä»¶</strong>çš„åµŒå¥—ã€ç»„åˆæ„å»ºè€Œæˆã€‚<br>æ¯ä¸ªç»„ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ UI å•å…ƒï¼Œå¯ä»¥åŒ…å«<strong>çŠ¶æ€</strong>ã€<strong>ç”Ÿå‘½å‘¨æœŸ</strong>ã€<strong>äº‹ä»¶å¤„ç†</strong>ç­‰é€»è¾‘ï¼Œä¹Ÿå¯ä»¥æ¥å—<strong>å±æ€§</strong>ã€<strong>å­ç»„ä»¶</strong>ç­‰å‚æ•°ã€‚<br>ä½†è¦æ³¨æ„ï¼Œå‡½æ•°ç»„ä»¶æœ¬èº«æ˜¯çº¯ç²¹çš„ï¼Œåªè´Ÿè´£ä¸<strong>æ¸²æŸ“</strong>ç›¸å…³çš„é€»è¾‘ï¼Œä¸åº”ç›´æ¥äº§ç”Ÿå‰¯ä½œç”¨ï¼Œå…¶å®ƒ React ç‰¹æ€§åº”è¯¥é€šè¿‡ Hook å®ç°ã€‚</p>
<blockquote>
<p>åœ¨Reactä¸­ï¼Œå‰¯ä½œç”¨æŒ‡çš„æ˜¯é‚£äº›ä¼šå½±å“ç»„ä»¶å¤–éƒ¨çŠ¶æ€æˆ–äº§ç”Ÿå…¶ä»–ä¸å¯é¢„æœŸç»“æœçš„æ“ä½œï¼Œæ¯”å¦‚æ•°æ®è·å–ã€DOMæ“ä½œã€è®¢é˜…ç­‰ã€‚å‰¯ä½œç”¨é€šå¸¸é€šè¿‡useEffecté’©å­å¤„ç†ï¼Œä»¥ç¡®ä¿åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ç‰¹å®šæ—¶åˆ»æ‰§è¡Œè¿™äº›æ“ä½œã€‚</p>
</blockquote>
<p>ç»„ä»¶çš„æœ¬è´¨æ˜¯ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼ˆå‡½æ•°ç»„ä»¶ <code>React.FC</code>ï¼‰ï¼Œæˆ–è€…æ˜¯ç»§æ‰¿è‡ª <code>React.Component</code> ï¼Œè‡³å°‘å…·æœ‰ <code>render</code> æ–¹æ³•çš„<strong>ç±»</strong>ï¼ˆç±»ç»„ä»¶ï¼‰ï¼Œéƒ½éœ€è¦è¿”å›ä¸€ä¸ª React å…ƒç´ èŠ‚ç‚¹ï¼ˆæˆ–è€… nullï¼‰ï¼Œä¹Ÿå°±æ˜¯æŒ‰ JSX è¯­æ³•ç¼–å†™çš„æ ‡ç­¾ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello, World!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// const App: React.FC æˆ–è€…ä½ ä¼šæƒ³è¦è¿™ä¹ˆå†™ï¼Œæ˜¾å¼å£°æ˜è¿™æ˜¯ä¸€ä¸ª React å‡½æ•°ç»„ä»¶</span></span><br><span class="line"><span class="comment">// ç±»ç»„ä»¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello, World!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å»ºè®®ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œè€Œä¸æ˜¯<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/Component">ç±»å¼ç»„ä»¶</a>ã€‚<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/legacy">è¿‡æ—¶çš„ API</a>ã€‚</p>
</blockquote>
<p><strong>ç»„ä»¶å</strong>(å‡½æ•° or ç±»å)ï¼Œ<strong>å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´</strong>ï¼Œä»¥ä¾¿ React èƒ½å¤ŸåŒºåˆ†ç»„ä»¶å’Œ HTML æ ‡ç­¾ã€‚</p>
<p>é¿å…åµŒå¥—ç»„ä»¶å®šä¹‰ï¼Œè¿™æ˜¯æ€§èƒ½ä½ä¸‹ä¸”æ˜“å‡º BUG çš„ã€‚è¯¦è§ï¼š<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/your-first-component#nesting-and-organizing-components">åµŒå¥—å’Œç»„ç»‡ç»„ä»¶</a></p>
<p>å½“å­ç»„ä»¶éœ€è¦ä½¿ç”¨çˆ¶ç»„ä»¶çš„æ•°æ®æ—¶ï¼Œéœ€è¦é€šè¿‡ <strong>props</strong> è¿›è¡Œä¼ é€’ï¼Œè€Œä¸æ˜¯åµŒå¥—å®šä¹‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ğŸ”´ æ°¸è¿œä¸è¦åœ¨ç»„ä»¶ä¸­å®šä¹‰ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="JSX-è¯­æ³•"><a href="#JSX-è¯­æ³•" class="headerlink" title="JSX è¯­æ³•"></a>JSX è¯­æ³•</h1><blockquote>
<p>å†™ JSX æ€»æ˜¯ç¦»ä¸å¼€åŸç”Ÿ JS çš„æ€æƒ³ï¼Œå®ƒå°½å¯èƒ½é¿å…äº†ä¼ ç»Ÿæ¨¡æ¿è¯­è¨€çš„å¤æ‚æ€§ï¼Œå…·æœ‰å°‘é‡çš„è¯­æ³•æ‰©å±•ä¸æŠ½è±¡ã€‚<br>HTML è½¬ JSX å·¥å…·ï¼š<a target="_blank" rel="noopener" href="https://transform.tools/html-to-jsx">html-to-jsx</a>ã€‚</p>
</blockquote>
<h2 id="æ ‡ç­¾è§„åˆ™"><a href="#æ ‡ç­¾è§„åˆ™" class="headerlink" title="æ ‡ç­¾è§„åˆ™"></a>æ ‡ç­¾è§„åˆ™</h2><p>JSX è¯­æ³•ä¸­ï¼Œæ ‡ç­¾çš„å†™æ³•ä¸ HTML ç±»ä¼¼ï¼Œä½†å¿…é¡»ä½¿ç”¨<strong>é—­åˆæ ‡ç­¾</strong>ã€‚</p>
<p><strong>1ã€éƒ¨åˆ†å±æ€§åˆ«åï¼š</strong><br>class å±æ€§éœ€è¦å†™æˆ <code>className</code>ï¼Œfor å±æ€§å†™æˆ <code>htmlFor</code>ï¼Œå› ä¸º class å’Œ for æ˜¯ JS çš„ä¿ç•™å­—ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSX</span></span><br><span class="line">&lt;div className=<span class="string">&quot;container&quot;</span>&gt;<span class="title class_">Hello</span>, <span class="title class_">World</span>!&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&quot;name&quot;</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="comment">// HTML</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span>Hello, World!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><strong>2ã€å±æ€§é©¼å³°å‘½åæ³•ï¼š</strong><br>æ‰€æœ‰ DOM å±æ€§å’Œç‰¹æ€§ï¼ˆåŒ…æ‹¬äº‹ä»¶å¤„ç†ç¨‹åºï¼‰éƒ½åº”é‡‡ç”¨<strong>é©¼å³°å‘½åæ³•</strong>ã€‚é™¤äº† <code>aria-*</code> å’Œ <code>data-*</code> å±æ€§ï¼Œå®ƒä»¬åº”è¯¥ä¿æŒ<strong>å°å†™</strong>ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSX</span></span><br><span class="line">&lt;input <span class="keyword">type</span>=<span class="string">&quot;text&quot;</span> onChange=&#123;handleChange&#125; /&gt;</span><br><span class="line"><span class="comment">// HTML</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">onchange</span>=<span class="string">&quot;handleChange()&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><strong>3ã€æ‹¬å·åŒ…è£¹æ ‡ç­¾ï¼š</strong><br>å…ƒç´ èŠ‚ç‚¹å†™æˆä¸€è¡Œæ—¶ï¼Œå¯ä»¥çœç•¥å¤–å±‚çš„æ‹¬å·ï¼Œä½†æ˜¯<strong>å¤šè¡Œ</strong>æ—¶éœ€è¦ä½¿ç”¨<strong>æ‹¬å·åŒ…è£¹</strong>ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSX</span></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>
<p><strong>4ã€Fragment ç»„ä»¶</strong><br>React è¦æ±‚ç»„ä»¶åªèƒ½è¿”å›<strong>ä¸€ä¸ªæ ¹å…ƒç´ </strong>ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è¿”å›å¤šä¸ªå…ƒç´ ï¼Œå°±éœ€è¦é¢å¤–æ·»åŠ ä¸€ä¸ªçˆ¶æ ‡ç­¾åŒ…è£¹å¤šä¸ªå…ƒç´ ã€‚<br>React 16 ä¹‹åï¼Œæä¾›äº†<strong>Fragment</strong>ç»„ä»¶ <code>&lt;&gt;&lt;/&gt;</code>ï¼Œç”¨äºåŒ…è£¹å¤šä¸ªå…„å¼ŸèŠ‚ç‚¹ï¼Œä¸ä¼šåœ¨ DOM ä¸­æ¸²æŸ“é¢å¤–çš„èŠ‚ç‚¹ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>React is awesome!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>5ã€æ³›å‹åŠ é€—å·ï¼š</strong><br>tsx ä¼šå°†æ³›å‹å†™æ³•è§†ä¸º JSX æ ‡ç­¾ï¼ŒåŠ ä¸ª<strong>é€—å·</strong>è§£å†³ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;T&gt; -&gt; &lt;T,&gt;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyComponent</span> = &lt;T,&gt;<span class="function">(<span class="params">props: &#123; value: T &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.value&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="æ’å€¼è¯­æ³•"><a href="#æ’å€¼è¯­æ³•" class="headerlink" title="æ’å€¼è¯­æ³• {}"></a>æ’å€¼è¯­æ³• {}</h2><p><code>&#123;&#125;</code> ç”¨äºåœ¨ JSX ä¸­æ’å…¥ <strong>JS è¡¨è¾¾å¼</strong>ï¼Œå¯ä»¥æ˜¯<strong>å˜é‡</strong>ã€<strong>å‡½æ•°è°ƒç”¨</strong>ã€<strong>ä¸‰å…ƒè¿ç®—</strong>ã€<strong>é€»è¾‘è¿ç®—</strong>ç­‰ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> jsxXml = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>ä¸€ä¸ªæ ‡ç­¾<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> classList = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* 1ã€è¡¨è¾¾å¼ */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;new Date().getTime()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;flag ? &quot;çœŸ&quot; : &quot;å‡&quot;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è®¡æ•°: &#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* 2ã€ç»‘å®šäº‹ä»¶ï¼Œä¼ å‚éœ€è¦ä½¿ç”¨é«˜é˜¶å‡½æ•° */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onClick</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setCount(count + 1);</span></span><br><span class="line"><span class="language-xml">        console.log(e);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      å¢åŠ </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* 3ã€æ’å…¥ JSX æ ‡ç­¾ */&#125;</span></span><br><span class="line"><span class="language-xml">    &#123;jsxXml&#125;</span></span><br><span class="line"><span class="language-xml">    &#123;/* 4ã€ç»‘å®š class */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classList.join(</span>&quot; &quot;)&#125;&gt;</span>ç»‘å®š class<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>style ä¼ å…¥<strong>å¯¹è±¡</strong>åŠ¨æ€ç»‘å®š<strong>å†…è”æ ·å¼</strong>ï¼Œcss å±æ€§åŒæ ·ä½¿ç”¨<strong>é©¼å³°å‘½åæ³•</strong>ï¼Œæ•°å­—ç±»å‹çš„å±æ€§å€¼ä¼šè‡ªåŠ¨æ·»åŠ  px å•ä½ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> style = &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&quot;red&quot;</span>,</span><br><span class="line">  <span class="attr">fontSize</span>: <span class="number">20</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span>å†…è”æ ·å¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>
<p><code>dangerouslySetInnerHTML</code> å±æ€§ç”¨äº<strong>æ’å…¥ HTML</strong>ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å« <code>__html</code> å±æ€§ã€‚å’Œ v-htmlã€innerHTML ç±»ä¼¼ï¼Œå°å¿ƒ XSS æ”»å‡»ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> markup = &#123; <span class="attr">__html</span>:<span class="string">&#x27;&lt;p&gt;æ’å…¥çš„ html&lt;/p&gt;&#x27;</span> &#125;;</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;markup&#125;</span> /&gt;</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="æ¡ä»¶ä¸åˆ—è¡¨æ¸²æŸ“"><a href="#æ¡ä»¶ä¸åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="æ¡ä»¶ä¸åˆ—è¡¨æ¸²æŸ“"></a>æ¡ä»¶ä¸åˆ—è¡¨æ¸²æŸ“</h2><p>é…åˆåŸç”Ÿ JS å®ç°ç±»ä¼¼ v-if å’Œ v-for çš„æ¡ä»¶æ¸²æŸ“å’Œåˆ—è¡¨æ¸²æŸ“ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isShow = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> dataList = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;æå››&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;isShow &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;dataList.map((item) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    )&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>å’Œ Vue ç›¸åŒï¼ŒReact ä¹Ÿéœ€è¦ <strong>key</strong> å±æ€§æ¥å”¯ä¸€æ ‡è¯†åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œä»¥ä¾¿ React èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°æ›´æ–° DOMã€‚è¯¦è§ï¼š<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/rendering-lists#keeping-list-items-in-order-with-key">ç”¨ key ä¿æŒåˆ—è¡¨é¡¹çš„é¡ºåº</a>ã€‚å¦å¤–ï¼Œkey å±æ€§ä¸ä¼šè¢«å½“ä½œ props çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>å¦‚æœæ¯ä¸ªåˆ—è¡¨é¡¹éœ€è¦æ¸²æŸ“å¤šä¸ªå…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨å®Œæ•´çš„ <strong>Fragment</strong> ç»„ä»¶åŒ…è£¹ï¼Œè€Œéç®€å†™çš„ <code>&lt;&gt;&lt;/&gt;</code>ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;dataList.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Fragment</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>&#123;item.id&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Fragment</span>&gt;</span></span></span><br><span class="line">))&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åº”è¯¥å…ˆäº†è§£çš„ä¸œè¥¿"><a href="#åº”è¯¥å…ˆäº†è§£çš„ä¸œè¥¿" class="headerlink" title="åº”è¯¥å…ˆäº†è§£çš„ä¸œè¥¿"></a>åº”è¯¥å…ˆäº†è§£çš„ä¸œè¥¿</h1><p>åœ¨æ­£å¼å­¦ä¹  React ä¹‹å‰ï¼Œåº”è¯¥çŸ¥é“ä¸€äº›æ¦‚å¿µã€‚<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/thinking-in-react">React å“²å­¦</a>ã€<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/rules">React è§„åˆ™</a>ï¼Œå†…å®¹ä¸å¤šï¼Œä½†å¾ˆé‡è¦ã€‚</p>
<h2 id="ä½¿ç”¨çº¯å‡½æ•°"><a href="#ä½¿ç”¨çº¯å‡½æ•°" class="headerlink" title="ä½¿ç”¨çº¯å‡½æ•°"></a>ä½¿ç”¨çº¯å‡½æ•°</h2><p>åº”è¯¥å°½é‡ä¿æŒç»„ä»¶çš„<strong>çº¯å‡½æ•°</strong>ç‰¹æ€§ï¼Œä¸äº§ç”Ÿ<strong>å‰¯ä½œç”¨</strong>ã€‚</p>
<ol>
<li><strong>åªè´Ÿè´£è‡ªå·±çš„ä»»åŠ¡</strong>ã€‚å®ƒä¸ä¼šæ›´æ”¹åœ¨è¯¥å‡½æ•°è°ƒç”¨å‰å°±å·²å­˜åœ¨çš„å¯¹è±¡æˆ–å˜é‡ã€‚</li>
<li><strong>è¾“å…¥ç›¸åŒï¼Œåˆ™è¾“å‡ºç›¸åŒ</strong>ã€‚ç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œç»„ä»¶åº”è¯¥æ€»æ˜¯è¿”å›ç›¸åŒçš„ JSXã€‚</li>
</ol>
<p>å†…å®¹ä¸å¤šï¼Œä¸»è¦æ˜¯å¼€å‘æ—¶æ³¨æ„ç‚¹ï¼Œå…»æˆçº¯å‡½æ•°çš„æ€æƒ³å³å¯ï¼Œè¯¦è§ï¼š<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/keeping-components-pure">ä¿æŒç»„ä»¶çº¯ç²¹</a></p>
<h2 id="æ ‘ç»“æ„-UI"><a href="#æ ‘ç»“æ„-UI" class="headerlink" title="æ ‘ç»“æ„ UI"></a>æ ‘ç»“æ„ UI</h2><p>å’Œ DOM æ ‘ç±»ä¼¼ï¼ŒReact æŠ½è±¡å‡ºçš„ UI ä¹Ÿæ˜¯ä¸€ä¸ª<strong>æ ‘å½¢ç»“æ„</strong>ã€‚è¯¦è§ï¼š<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/understanding-your-ui-as-a-tree">å°† UI è§†ä¸ºæ ‘</a></p>
<p>è¿™å¾ˆç†Ÿæ‚‰ï¼ŒVue ä¹Ÿæ˜¯å¦‚æ­¤ï¼ŒåŸºäºæ¨¡å—çš„ä¾èµ–å…³ç³»ã€å®é™…çš„æ¸²æŸ“é€»è¾‘ï¼Œå¯ä»¥åˆ†æå‡º<strong>æ¸²æŸ“æ ‘</strong>ã€<strong>ç»„ä»¶æ ‘</strong>ã€<strong>fiberæ ‘</strong>ç­‰ï¼Œæ€»ä¹‹æ ‘ç»“æ„ä½“ç°äº†å„ä¸ªç»„ä»¶å®ä½“ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p>React æ˜¯<strong>è·¨å¹³å°</strong>çš„ UI æ¡†æ¶ï¼Œæ¸²æŸ“æ ‘ä¸ä»…å¯ä»¥æ¸²æŸ“åˆ°æµè§ˆå™¨ DOMï¼Œè¿˜å¯ä»¥æ¸²æŸ“åˆ°<strong>åŸç”Ÿåº”ç”¨</strong>ç­‰ç¯å¢ƒã€‚</p>
<h2 id="React-æ¸²æŸ“"><a href="#React-æ¸²æŸ“" class="headerlink" title="React æ¸²æŸ“"></a>React æ¸²æŸ“</h2><p>React æ¸²æŸ“æŒ‡ç»„ä»¶å°†å…¶çŠ¶æ€å’Œå±æ€§ï¼ˆstate å’Œ propsï¼‰è½¬åŒ–ä¸ºç”¨æˆ·ç•Œé¢å…ƒç´ çš„è¿‡ç¨‹ã€‚åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼ŒReact ç»„ä»¶ä¼šè½¬åŒ–ä¸º DOM å…ƒç´ ã€‚åˆ†ä¸ºä¸‰æ­¥ï¼š<strong>è§¦å‘</strong>ã€<strong>æ¸²æŸ“</strong>ã€<strong>æäº¤</strong>ã€‚<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/render-and-commit">æ–‡æ¡£-æ¸²æŸ“å’Œæäº¤</a></p>
<p><strong>1ã€è§¦å‘ï¼š</strong>ä¸¤ç§æƒ…å†µä¼šè§¦å‘ React ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p>
<ol>
<li>ç»„ä»¶çš„<strong>åˆæ¬¡æ¸²æŸ“</strong>ã€‚<code>createRoot().render()</code>ã€‚</li>
<li>ç»„ä»¶ï¼ˆæˆ–å…¶ç¥–å…ˆï¼‰çš„<strong>çŠ¶æ€æ”¹å˜</strong>ã€‚å³è°ƒç”¨ set å‡½æ•°ä¼ å…¥æ–°å€¼ã€‚</li>
</ol>
<p><strong>2ã€æ¸²æŸ“ï¼š</strong>è°ƒç”¨ç»„ä»¶ï¼Œåœ¨å†…å­˜ä¸­åˆ›å»ºå®é™… DOM èŠ‚ç‚¹ã€‚</p>
<ol>
<li><strong>åˆæ¬¡æ¸²æŸ“</strong>æ—¶ï¼Œè°ƒç”¨æ ¹ç»„ä»¶ã€‚</li>
<li><strong>é‡æ¸²æŸ“</strong>æ—¶ï¼Œè°ƒç”¨å†…éƒ¨çŠ¶æ€æ›´æ–°è§¦å‘äº†æ¸²æŸ“çš„å‡½æ•°ç»„ä»¶ï¼Œé€šè¿‡ diff ç®—æ³•æ¯”è¾ƒæ–°æ—§è™šæ‹Ÿ DOMï¼Œæ ‡è®°éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ã€‚</li>
</ol>
<p>éƒ½ä¼šé€’å½’è°ƒç”¨æ‰€æœ‰åä»£ç»„ä»¶ã€‚</p>
<p><strong>3ã€æäº¤ï¼š</strong>ä¿®æ”¹å®é™… DOM æ ‘ã€‚</p>
<ol>
<li><strong>åˆæ¬¡æ¸²æŸ“</strong>æ—¶ï¼Œå°†è™šæ‹Ÿ DOM è½¬åŒ–ä¸ºå®é™… DOMã€‚</li>
<li><strong>é‡æ¸²æŸ“æ—¶</strong> æ ¹æ®èŠ‚ç‚¹çš„æ ‡è®°ï¼Œæœ€å°æ›´æ–°å®é™… DOMã€‚</li>
</ol>
<p>ä¿®æ”¹å®Œ DOM æ ‘åï¼Œå°±åˆ°æµè§ˆå™¨çš„å›æµå’Œé‡ç»˜é˜¶æ®µäº†ã€‚</p>
<blockquote>
<p>å®é™…ä¸Šçš„å†…éƒ¨æ¸²æŸ“è¿‡ç¨‹å¾ˆå¤æ‚ï¼ŒReact ä¼šå°†ç»„ä»¶å…³ç³»è½¬åŒ–ä¸º<strong>Fiber æ ‘</strong>ï¼Œå¹¶é€šè¿‡<strong>è°ƒåº¦å™¨</strong>æ§åˆ¶æ¸²æŸ“çš„ä¼˜å…ˆçº§ã€æ—¶é—´ï¼Œè¿˜ä¼šæ‹†åˆ†æ¸²æŸ“ä»»åŠ¡åˆ°æµè§ˆå™¨æ¯ä¸ªæ¸²æŸ“å¸§çš„ç©ºé—²æ—¶åˆ»ï¼Œåé¢å†æ·±å…¥äº†è§£ã€‚</p>
</blockquote>
<h1 id="props-ç»„ä»¶ä¼ å‚"><a href="#props-ç»„ä»¶ä¼ å‚" class="headerlink" title="props ç»„ä»¶ä¼ å‚"></a>props ç»„ä»¶ä¼ å‚</h1><p>React ç»„ä»¶ä½¿ç”¨ <code>props</code> æ¥äº’ç›¸é€šä¿¡ã€‚çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ç»‘å®š props å±æ€§ï¼Œå­ç»„ä»¶åœ¨å‡½æ•°å‚æ•°ä¸­æ¥æ”¶ props å¯¹è±¡ã€‚</p>
<p>props æ˜¯ç»„ä»¶çš„å”¯ä¸€å‚æ•°ï¼Œå®ƒåº”è¯¥ä¿æŒ<strong>åªè¯»</strong>ï¼Œä¸åº”è¯¥åœ¨ç»„ä»¶å†…éƒ¨æ›´æ”¹ props çš„å€¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°é€šè¿‡è§£æ„èµ‹å€¼è·å– props çš„å±æ€§å€¼ï¼Œå¹¶æŒ‡å®šé»˜è®¤å€¼ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line">&lt;<span class="title class_">Props</span> title=<span class="string">&quot;qcqx&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Props children<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Props</span>&gt;</span><br><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Props</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">children</span>: <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">PropsTest</span>(<span class="params">&#123; title = <span class="string">&quot;chuckle&quot;</span>, children &#125;: Props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°† JSX ä½œä¸º<strong>æ ‡ç­¾å†…å®¹</strong>ä¼ é€’ç»™å­ç»„ä»¶ï¼Œä¼šæ·»åŠ  <code>props.children</code>ï¼Œç±»ä¼¼äº Vue çš„<strong>æ’æ§½</strong>ã€‚</p>
<p>æ³¨æ„åœ¨ 18 åéœ€è¦æ‰‹åŠ¨å®šä¹‰ children ç±»å‹ä¸º <code>React.ReactNode</code>ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">children</span>: <span class="title class_">React</span>.<span class="property">ReactNode</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>React ä½¿ç”¨ <code>Object.freeze</code> å†»ç»“ propsï¼Œä»¥ç»´æŒå•å‘æ•°æ®æµï¼Œå­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶çš„propsã€‚</p>
</blockquote>
<h2 id="å…„å¼Ÿç»„ä»¶é€šä¿¡"><a href="#å…„å¼Ÿç»„ä»¶é€šä¿¡" class="headerlink" title="å…„å¼Ÿç»„ä»¶é€šä¿¡"></a>å…„å¼Ÿç»„ä»¶é€šä¿¡</h2><p>å…„å¼Ÿç»„ä»¶é€šä¿¡å¯ä»¥å°†<strong>å…±äº«çŠ¶æ€</strong>æå‡åˆ°<strong>å…±åŒçš„çˆ¶ç»„ä»¶</strong>ä¸­ï¼Œå˜ä¸ºçˆ¶å­ç»„ä»¶é€šä¿¡ã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å‘å¸ƒè®¢é˜…ã€å…¨å±€çŠ¶æ€ç®¡ç†ç­‰æ–¹å¼ï¼Œå¯èƒ½éœ€è¦å¼•å…¥é¢å¤–çš„åº“ï¼Œå¦‚ mittã€Redux ç­‰ã€‚çŠ¶æ€å®¹å™¨åé¢å†å­¦ä¹ ï¼ŒåŸç”Ÿæµè§ˆå™¨å·²ç»å®ç°äº†å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œç›´æ¥ä½¿ç”¨ï¼</p>
<figure class="highlight tsx"><figcaption><span>Card1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Card1</span>: <span class="title class_">React</span>.<span class="property">FC</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> event = <span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&quot;on-card&quot;</span>); <span class="comment">// åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    event.<span class="property">params</span> = &#123; <span class="attr">name</span>: <span class="string">&quot;Card1&quot;</span> &#125;;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">dispatchEvent</span>(event); <span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>Card1<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Card1</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Card2</span>: <span class="title class_">React</span>.<span class="property">FC</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;on-card&quot;</span>, <span class="function">(<span class="params">e: Event&lt;&#123; name: <span class="built_in">string</span> &#125;&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">params</span>.<span class="property">name</span>); <span class="comment">// &quot;Card1&quot;</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Card2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Card2</span>;</span><br></pre></td></tr></table></figure>
<p>è¿˜å¾—æ‰©å±•äº‹ä»¶å¯¹è±¡ï¼Œä½¿å…¶å…·æœ‰å‚æ•°å±æ€§ï¼Œå½“ç„¶ä¸ºäº†æ–¹ä¾¿ï¼Œä¹Ÿå¯ä»¥å°è£…ä¸€ä¸ª CustomEventï¼Œç»§æ‰¿è‡ª Eventã€‚</p>
<figure class="highlight ts"><figcaption><span>custom.d.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">declare</span> <span class="variable language_">global</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">Event</span>&lt;T = <span class="built_in">any</span>&gt; &#123;</span><br><span class="line">    <span class="attr">params</span>: T; <span class="comment">// ä½¿ç”¨æ³›å‹ T æ¥æŒ‡å®š params çš„ç±»å‹ï¼Œé»˜è®¤ä¸º any</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="React-äº‹ä»¶"><a href="#React-äº‹ä»¶" class="headerlink" title="React äº‹ä»¶"></a>React äº‹ä»¶</h1><p>åœ¨ React ä¸­ï¼Œæ‰€æœ‰çš„å†…ç½®æµè§ˆå™¨ç»„ä»¶ï¼Œå¦‚ <code>&lt;div&gt;</code>ï¼Œéƒ½æ”¯æŒä¸€äº›å¸¸è§çš„å±æ€§å’Œäº‹ä»¶ã€‚<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react-dom/components/common">æ™®é€šç»„ä»¶</a>ã€<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/responding-to-events">å“åº”äº‹ä»¶</a>ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react-dom/components/common#react-event-object">React äº‹ä»¶</a>è™½ç„¶å’ŒåŸç”Ÿ DOM äº‹ä»¶ç”¨æ³•ã€åç§°ç±»ä¼¼ï¼Œä½†å®é™…ä¸Šæ˜¯æŠ½è±¡å°è£…è¿‡åçš„ï¼ŒReact äº‹ä»¶æ˜¯<strong>åˆæˆäº‹ä»¶</strong>ï¼Œå®ƒæ˜¯<strong>è·¨æµè§ˆå™¨</strong>çš„ï¼Œå®ƒç¬¦åˆä¸åº•å±‚ DOM äº‹ä»¶ç›¸åŒçš„æ ‡å‡†ï¼Œä½†ä¿®å¤äº†ä¸€äº›æµè§ˆå™¨ä¸ä¸€è‡´æ€§ã€‚</p>
<p>æ‰€è°“<strong>åˆæˆäº‹ä»¶</strong>ï¼Œå°±æ˜¯åœ¨æ¨¡æ‹Ÿäº‹ä»¶æ—¶ï¼Œå¯èƒ½ç”±å¤šä¸ªåŸç”Ÿäº‹ä»¶ç»„åˆè€Œæˆã€‚éƒ¨åˆ†åŸç”Ÿäº‹ä»¶ä¸ä¼šå†’æ³¡ï¼Œå¦‚ <code>focus</code>ã€<code>blur</code>ã€<code>change</code> ç­‰ï¼Œä½†åœ¨ React ä¸­ï¼Œå®ƒä»¬éƒ½<strong>ä¼šè¢«æ¨¡æ‹Ÿæˆå¯å†’æ³¡äº‹ä»¶</strong>ã€‚</p>
<p><strong>åŸºæœ¬åŸç†ï¼š</strong><br>React é€šè¿‡<strong>äº‹ä»¶å§”æ‰˜</strong>çš„æ–¹å¼ï¼Œå°†æ‰€æœ‰äº‹ä»¶ç»‘å®šåˆ°<strong>æœ€å¤–å±‚å®¹å™¨</strong>ï¼Œæ¯ä¸ªäº‹ä»¶å„ç»‘å®šä¸€æ¬¡å†’æ³¡å’Œæ•è·é˜¶æ®µï¼ˆåŸç”Ÿä¸å†’æ³¡åªç»‘å®šæ•è·é˜¶æ®µï¼‰ã€‚å½“ä¸€ä¸ª React å…ƒç´ èŠ‚ç‚¹è§¦å‘äº‹ä»¶åï¼Œåœ¨ DOM ä¸Šä¼šè§¦å‘ä¸¤æ¬¡ React çš„äº‹ä»¶ç»Ÿä¸€å¤„ç†å‡½æ•°ï¼Œå…ˆæ‰¾åˆ°äº‹ä»¶æºï¼Œå†æ ¹æ® return æŒ‡é’ˆå‘ä¸Šéå†ï¼Œæ”¶é›†æ‰€æœ‰å¯¹åº”äº‹ä»¶ã€<strong>é˜¶æ®µ</strong>çš„å¤„ç†å‡½æ•°ï¼Œåˆ†åˆ«å½¢æˆäº‹ä»¶é˜Ÿåˆ—ï¼Œä¾æ¬¡æ‰§è¡Œã€‚</p>
<p>åœ¨å‘½åä¸Šé‡‡ç”¨å°é©¼å³° <code>on[&lt;name&gt;][Capture]</code>ï¼ŒåŠ ä¸Š Capture è¡¨ç¤ºæ•è·é˜¶æ®µæ‰§è¡Œã€‚<br>äº‹ä»¶å¯¹è±¡ä¹Ÿè¢«å°è£…æˆäº†<strong>åˆæˆäº‹ä»¶å¯¹è±¡</strong>ï¼Œä½†ä»ç„¶å¯ä»¥é€šè¿‡ <code>e.nativeEvent</code> å±æ€§è®¿é—®åŸç”Ÿäº‹ä»¶å¯¹è±¡ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        console.log(&quot;click&quot;);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      ç‚¹å‡» div</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        console.log(e);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChangeCapture</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          console.log(e.nativeEvent);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">            console.log(e.target.value);</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>e.stopPropagation()</code> å’Œ <code>e.preventDefault()</code> æ–¹æ³•ï¼Œå¯ä»¥é˜»æ­¢äº‹ä»¶çš„å†’æ³¡å’Œé»˜è®¤è¡Œä¸ºï¼Œä½†è¿™ä¸¤ä¸ªæ–¹æ³•ä¹Ÿæ˜¯<strong>åˆæˆäº‹ä»¶</strong>çš„å°è£…ï¼Œå¹¶ä¸æ˜¯åŸç”Ÿäº‹ä»¶å¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<blockquote>
<p>åˆæˆäº‹ä»¶ä¸åŸç”Ÿ DOM äº‹ä»¶çš„ç±»å‹å¹¶ä¸ä¸€å®šç›¸åŒï¼Œä¾‹å¦‚ React ä¸­çš„ onChange å®é™…ä¸Šæ˜¯ input äº‹ä»¶çš„å°è£…ï¼Œå…¶è¡Œä¸ºä¹Ÿå’Œ onInput æ²¡åŒºåˆ«ã€‚</p>
</blockquote>
<h1 id="state-ç»„ä»¶çŠ¶æ€"><a href="#state-ç»„ä»¶çŠ¶æ€" class="headerlink" title="state ç»„ä»¶çŠ¶æ€"></a>state ç»„ä»¶çŠ¶æ€</h1><p><strong>çº¯å‡½æ•°å¼</strong>çš„ç»„ä»¶ä¸å…·æœ‰<strong>çŠ¶æ€</strong>ï¼Œä½† React å†…ç½®äº†å¤šç§ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/hooks">Hook</a>ï¼Œå¯ä»¥è®©ç»„ä»¶æ›´åŠ çµæ´»ï¼Œä½¿ç”¨çŠ¶æ€ï¼ˆstateï¼‰å’Œå…¶ä»– React ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯ä¿æŒ<strong>çŠ¶æ€</strong>ã€è·å–<strong>ä¸Šä¸‹æ–‡</strong>ã€<strong>ç¼“å­˜è®¡ç®—ç»“æœ</strong>ç­‰ã€‚</p>
<blockquote>
<p>å¾ˆå®¹æ˜“å¯ä»¥æƒ³åˆ°ï¼Œå±€éƒ¨å˜é‡æ— æ³•åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­æŒä¹…ä¿å­˜ï¼Œæ›´æ”¹å±€éƒ¨å˜é‡ä¹Ÿä¸ä¼šè§¦å‘æ¸²æŸ“ï¼Œæ¯•ç«Ÿ React æ²¡æœ‰ åƒ Vue é‚£æ ·ä½¿ç”¨ Proxy åŠ«æŒæ•°æ®ã€‚</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/useState">useState</a> åº”è¯¥æ˜¯å­¦ä¹  React é¦–ä¸ªé‡åˆ°çš„ Hookã€‚å®ƒå…è®¸ä½ å‘ç»„ä»¶æ·»åŠ ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-a-components-memory">çŠ¶æ€å˜é‡</a>ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>); <span class="comment">// æ•°ç»„è§£æ„èµ‹å€¼</span></span><br></pre></td></tr></table></figure>
<p>æ€»åº”è¯¥ä½¿ç”¨ const å˜é‡æ¥æ”¶ <code>useState</code> è¿”å›çš„ä¸¤ä¸ªä¸œè¥¿ã€‚</p>
<ol>
<li><strong>dataï¼š</strong>ç¬¬ä¸€ä¸ªæ˜¯å½“å‰çš„æ•°æ®ï¼Œå®é™…ä¸Šå°±æ˜¯ä¼ å…¥ useState æˆ– setter çš„å‚æ•°ï¼Œå¦‚æœä¼ å…¥äº†å¼•ç”¨æ•°æ®ï¼Œå®ƒä»¬æŒ‡å‘çš„å¼•ç”¨åœ°å€æ˜¯ç›¸åŒçš„ã€‚</li>
<li><strong>setterï¼š</strong>ç¬¬äºŒä¸ªæ˜¯ set å‡½æ•°ï¼Œç”¨äºæ›´æ–°æ•°æ®ï¼Œå…¶è¡Œä¸ºæ˜¯<strong>å¼‚æ­¥</strong>çš„ï¼Œè§¦å‘æ¸²æŸ“ï¼Œä¼šæ ‡è®°è¯¥ç»„ä»¶éœ€è¦é‡æ–°æ¸²æŸ“ï¼Œå¹¶åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“å‘¨æœŸå†…é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶ã€‚</li>
</ol>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">num</span>: <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> [obj2, setObj] = <span class="title function_">useState</span>(obj1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1 === obj2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>React ä¼šåœ¨å†…éƒ¨ç»´æŠ¤å¥½å½“å‰ç»„ä»¶å®ä¾‹çš„çŠ¶æ€ï¼Œé€šè¿‡ç»„ä»¶åœ¨æ¸²æŸ“æ ‘ä¸­çš„ä½ç½®å°†å®ƒä¿å­˜çš„æ¯ä¸ªçŠ¶æ€ä¸æ­£ç¡®çš„ç»„ä»¶å…³è”èµ·æ¥ï¼Œä¿è¯å¤šæ¬¡æ¸²æŸ“é—´ä¸å˜ï¼Œè¿”å›çš„æ˜¯æµ…æ‹·è´<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-as-a-snapshot">å¿«ç…§</a>ã€‚åªæœ‰åœ¨<strong>ä¸‹ä¸€æ¬¡æ¸²æŸ“</strong>åï¼Œæ‰èƒ½è·å–åˆ°æœ€æ–°çš„å¿«ç…§ã€‚</p>
<figure class="highlight tsx"><figcaption><span>æ›´æ–°äº†æ•°æ®æ— æ³•ç«‹å³æ‹¿åˆ°ï¼Œæœ¬è´¨æ˜¯ setObj ä¼ å…¥äº†æ–°çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶é‡æ–°èµ‹å€¼è·å–</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [obj, setObj] = <span class="title function_">useState</span>(&#123; <span class="attr">num</span>: <span class="number">0</span> &#125;);</span><br><span class="line"><span class="comment">// åŠ ä¸ªåˆ¤æ–­ï¼Œå¦åˆ™ä¼šè¿›å…¥æ— é™å¾ªç¯ï¼ŒToo many re-renders</span></span><br><span class="line"><span class="keyword">if</span> (obj.<span class="property">num</span> === <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="title function_">setObj</span>(&#123; ...obj, <span class="attr">num</span>: <span class="number">1</span> &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// &#123; num: 0 &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>State æ˜¯ç»„ä»¶å®ä¾‹å†…éƒ¨çš„çŠ¶æ€ï¼Œæ¸²æŸ“åŒä¸€ä¸ªç»„ä»¶ä¸¤æ¬¡ï¼Œæ¯ä¸ªå®ä¾‹éƒ½ä¼šæœ‰å®Œå…¨éš”ç¦»çš„ stateã€‚</p>
<p>set å‡½æ•°ä¼š<strong>æµ…æ¯”è¾ƒ</strong>æ–°æ—§å€¼ï¼Œå¦‚æœç›¸åŒï¼Œä¼šè®¤ä¸ºæ•°æ®æ²¡æœ‰å˜åŒ–ï¼Œä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚è¿™æ˜¯ React çš„ <strong>Immutable</strong> æ€æƒ³çš„ä½“ç°ï¼Œè¿™æ„å‘³è¿™<strong>ä¸èƒ½åªä¿®æ”¹å±æ€§</strong>ï¼ŒæŠŠåŸæ¥çš„å¯¹è±¡ä¼ å…¥ setterï¼Œè€Œæ˜¯åº”è¯¥ä¼ å…¥ä¸€ä¸ª<strong>æ–°å¯¹è±¡</strong>ï¼Œä¸€ä¸ªæ–°çš„å¼•ç”¨åœ°å€ã€‚</p>
<blockquote>
<p>åº”è¯¥å°† state è§†ä¸º<strong>åªè¯»</strong>çš„ï¼Œæ— è®ºå…¶æ˜¯åŸºæœ¬ç±»å‹è¿˜æ˜¯å¼•ç”¨ç±»å‹ï¼Œéƒ½åº”è¯¥é€šè¿‡ set å‡½æ•°æ¥æ›´æ–°ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ state çš„å€¼æˆ–å±æ€§ã€‚<br><a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-objects-in-state#why-is-mutating-state-not-recommended-in-react">ä¸ºä»€ä¹ˆåœ¨ React ä¸­ä¸æ¨èç›´æ¥ä¿®æ”¹ stateï¼Ÿ</a></p>
</blockquote>
<h2 id="æƒ°æ€§åˆå§‹åŒ–å‡½æ•°"><a href="#æƒ°æ€§åˆå§‹åŒ–å‡½æ•°" class="headerlink" title="æƒ°æ€§åˆå§‹åŒ–å‡½æ•°"></a>æƒ°æ€§åˆå§‹åŒ–å‡½æ•°</h2><p>ç»å¸¸çš„ï¼Œåˆå§‹ state éœ€è¦é€šè¿‡ä¸€ä¸ª<strong>è®¡ç®—</strong>å¾—åˆ°ï¼Œè¿™æ—¶å¯ä»¥ä¼ å…¥ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼Œè€Œä¸æ˜¯ç›´æ¥æ‰§è¡Œå®ƒï¼Œå‡½æ•°çš„è¿”å›å€¼ä¼šä½œä¸ºåˆå§‹ stateã€‚</p>
<p>useState ä¼šå°†ä¼ å…¥çš„å‡½æ•°ä½œä¸ºä¸€ä¸ª<strong>æƒ°æ€§åˆå§‹åŒ–å‡½æ•°</strong>ã€‚React ä¼šåœ¨ç»„ä»¶<strong>é¦–æ¬¡æ¸²æŸ“</strong>æ—¶è°ƒç”¨å®ƒï¼Œå¹¶å°†å…¶ï¼ˆåŒæ­¥çš„ï¼‰è¿”å›å€¼ä½œä¸º useState çš„åˆå§‹å€¼ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åªä¼šåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶è°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line"><span class="keyword">const</span> [catList, setCatList] = <span class="title function_">useState</span>(setupCatList);</span><br><span class="line"><span class="comment">// æ¯æ¬¡é‡æ¸²æŸ“æ—¶éƒ½ä¼šè°ƒç”¨ï¼Œå¦‚æœè®¡ç®—é‡å¤§ï¼Œä¼šå½±å“æ€§èƒ½</span></span><br><span class="line"><span class="keyword">const</span> [catList, setCatList] = <span class="title function_">useState</span>(<span class="title function_">setupCatList</span>());</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°åº”è¯¥æ˜¯åŒæ­¥çš„ï¼Œå¦‚æœå­˜åœ¨å‰¯ä½œç”¨ï¼Œåº”è¯¥ä½¿ç”¨ useEffect Hookã€‚</p>
<h2 id="å‡½æ•°å¼æ›´æ–°"><a href="#å‡½æ•°å¼æ›´æ–°" class="headerlink" title="å‡½æ•°å¼æ›´æ–°"></a>å‡½æ•°å¼æ›´æ–°</h2><p>åœ¨ä¸€ä¸ªæ¸²æŸ“å‘¨æœŸä¸­å¤šæ¬¡è°ƒç”¨ set å‡½æ•°ï¼Œå¯èƒ½å¹¶æ²¡æœ‰é¢„æœŸçš„å åŠ ç»“æœã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line"><span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>ä»¥åŸç”Ÿ JS çš„è§†è§’æ¥çœ‹ï¼Œè¿™å°±æ˜¯è®¾ç½®äº†ä¸¤æ¬¡ <code>setCount(1)</code>ï¼Œä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œcount å½“ç„¶æ˜¯ 1ã€‚</p>
<p>å¦‚æœä½ éœ€è¦ set å‡½æ•°æ ¹æ®æœ€æ–°çš„ set ç»“æœè®¡ç®—æ–°çš„ stateï¼Œå¯ä»¥ä½¿ç”¨<strong>å‡½æ•°å¼æ›´æ–°</strong>ï¼Œä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œ<strong>æ¥æ”¶æœ€æ–°çš„ state</strong>ï¼Œè¿”å›å½“å‰ state å€¼ã€‚è¿™æ˜¯åœ¨ React å†…éƒ¨å¤„ç†çš„ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setCount</span>(<span class="function">(<span class="params">prevCount</span>) =&gt;</span> prevCount + <span class="number">1</span>);</span><br><span class="line"><span class="title function_">setCount</span>(<span class="function">(<span class="params">prevCount</span>) =&gt;</span> prevCount + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œcount å°±ä¼šæ˜¯ 2 äº†ã€‚</p>
<blockquote>
<p>åœ¨å­¦ä¹  React æ—¶ï¼Œä¸è¦å¿˜è®°åŸç”Ÿ JS çš„ç‰¹æ€§ï¼Œå¦‚<strong>é—­åŒ…</strong>ã€<strong>å¼‚æ­¥</strong>ã€<strong>äº‹ä»¶å¾ªç¯</strong>ç­‰ï¼ŒReact ä¹Ÿæ˜¯åˆ©ç”¨äº†è¿™äº›ç‰¹æ€§ï¼Œå®ç°çš„åŠŸèƒ½ã€‚</p>
</blockquote>
<h2 id="Immer-åº“"><a href="#Immer-åº“" class="headerlink" title="Immer åº“"></a>Immer åº“</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i immer use-immer</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ Immer åº“ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œæ˜¯ç›´æ¥ä¿®æ”¹ draft å¯¹è±¡ï¼Œä¿æŒä»£ç ç®€æ´ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useImmer &#125; <span class="keyword">from</span> <span class="string">&quot;use-immer&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> [obj1, setObj1] = <span class="title function_">useState</span>(&#123; <span class="attr">num</span>: <span class="number">0</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> [obj2, setObj2] = <span class="title function_">useImmer</span>(&#123; <span class="attr">num</span>: <span class="number">0</span> &#125;);</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;obj1.num&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setObj1((obj) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          return &#123; num: obj.num + 1 &#125;;</span></span><br><span class="line"><span class="language-xml">        &#125;);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      useState å¢åŠ </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;obj2.num&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setObj2((draft) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          draft.num++; // é€šè¿‡ Immer å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¿®æ”¹å±æ€§å€¼</span></span><br><span class="line"><span class="language-xml">        &#125;);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      useImmer å¢åŠ </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Š draft æ˜¯ä¸€ä¸ª <strong>Proxy</strong> å¯¹è±¡ï¼Œè¿™ä¸‹å¾ˆç†Ÿæ‚‰äº†ï¼Œé€šè¿‡ Proxy æ‹¦æˆªå¯¹è±¡æ“ä½œï¼ŒImmer å°±å¯ä»¥çŸ¥é“ä½ ä¿®æ”¹äº†ä»€ä¹ˆï¼Œç„¶åæ„å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ç»™ Stateã€‚</p>
<h2 id="æ›´å¥½åœ°ç®¡ç†çŠ¶æ€"><a href="#æ›´å¥½åœ°ç®¡ç†çŠ¶æ€" class="headerlink" title="æ›´å¥½åœ°ç®¡ç†çŠ¶æ€"></a>æ›´å¥½åœ°ç®¡ç†çŠ¶æ€</h2><p>æœ‰å…³ React å¦‚ä½•æ›´å¥½åœ°ç®¡ç†çŠ¶æ€ï¼Œå®˜ç½‘çš„æ•™ç¨‹éå¸¸è¯¦ç»†ï¼Œ<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/managing-state">çŠ¶æ€ç®¡ç†</a>ã€‚</p>
<blockquote>
<p>éšç€åº”ç”¨ä¸æ–­å˜å¤§ï¼Œæ›´æœ‰æ„è¯†çš„å»å…³æ³¨åº”ç”¨çŠ¶æ€å¦‚ä½•ç»„ç»‡ï¼Œä»¥åŠæ•°æ®å¦‚ä½•åœ¨ç»„ä»¶ä¹‹é—´æµåŠ¨ä¼šå¯¹ä½ å¾ˆæœ‰å¸®åŠ©ã€‚å†—ä½™æˆ–é‡å¤çš„çŠ¶æ€å¾€å¾€æ˜¯ç¼ºé™·çš„æ ¹æºã€‚</p>
</blockquote>
<h2 id="çŠ¶æ€çš„ä¿ç•™ã€é‡ç½®"><a href="#çŠ¶æ€çš„ä¿ç•™ã€é‡ç½®" class="headerlink" title="çŠ¶æ€çš„ä¿ç•™ã€é‡ç½®"></a>çŠ¶æ€çš„ä¿ç•™ã€é‡ç½®</h2><p>React åœ¨å†…éƒ¨ç»´æŠ¤äº†æ¯ä¸ªç»„ä»¶å®ä¾‹çš„ stateã€‚React åœ¨ç§»é™¤ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œä¹Ÿä¼šé”€æ¯å®ƒçš„ stateã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œ<strong>ç›¸åŒç»„ä»¶è¢«æ¸²æŸ“åœ¨ UI æ ‘çš„ç›¸åŒä½ç½®ï¼ŒReact å°±ä¼šä¿ç•™å®ƒçš„ state</strong>ã€‚ </p>
<figure class="highlight tsx"><figcaption><span>å¯¹ React æ¥è¯´ï¼Œè¿™æ ·æ¸²æŸ“ Counter æ˜¯ç›¸åŒä½ç½®ï¼Œå› ä¸ºæ˜¯ç”±ä¸‰å…ƒè¡¨è¾¾å¼è¿”å›ä¸€ä¸ªç»„ä»¶</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;isPlayerA ? (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Counter</span> <span class="attr">person</span>=<span class="string">&quot;Taylor&quot;</span> /&gt;</span></span></span><br><span class="line">) : (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Counter</span> <span class="attr">person</span>=<span class="string">&quot;Sarah&quot;</span> /&gt;</span></span></span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹ React æ¥è¯´é‡è¦çš„æ˜¯ç»„ä»¶åœ¨ UI æ ‘ä¸­çš„ä½ç½®ï¼Œè€Œä¸æ˜¯åœ¨ JSX ä¸­çš„ä½ç½®ã€‚</p>
<figure class="highlight tsx"><figcaption><span>è¿™æ ·æ¸²æŸ“ Counter æ˜¯ä¸åŒä½ç½®ï¼Œå› ä¸ºæ˜¯ä¸¤ä¸ªç»„ä»¶å äº†ä¸¤ä¸ªä½ç½®ï¼Œå°½ç®¡ä»£ç ä¸Šä»–ä»¬æ˜¯äº’æ–¥çš„</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;isPlayerA &amp;&amp;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Counter</span> <span class="attr">person</span>=<span class="string">&quot;Taylor&quot;</span> /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">&#123;!isPlayerA &amp;&amp;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Counter</span> <span class="attr">person</span>=<span class="string">&quot;Sarah&quot;</span> /&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥æ”¹å˜ <strong>key</strong> å±æ€§ï¼Œå¼ºåˆ¶ React é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œå³ä½¿å®ƒä»¬åœ¨ UI æ ‘ä¸­çš„ä½ç½®æ²¡æœ‰æ”¹å˜ã€‚å› ä¸º key å±æ€§æ˜¯ React ç”¨æ¥åŒºåˆ†ç»„ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œ<strong>ä¸åŒçš„ key ä¼šè¢«è®¤ä¸ºæ˜¯ä¸åŒçš„ç»„ä»¶</strong>ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;isPlayerA ? (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Counter</span> <span class="attr">key</span>=<span class="string">&quot;Taylor&quot;</span> <span class="attr">person</span>=<span class="string">&quot;Taylor&quot;</span> /&gt;</span></span></span><br><span class="line">) : (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Counter</span> <span class="attr">key</span>=<span class="string">&quot;Sarah&quot;</span> <span class="attr">person</span>=<span class="string">&quot;Sarah&quot;</span> /&gt;</span></span></span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„ï¼Œkey å¹¶ä¸æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œå®ƒåªç›¸å¯¹äºçˆ¶å…ƒç´ æ˜¯å”¯ä¸€çš„ã€‚å½“è®¾ç½® key åï¼ŒReact ä¼šå°† key ä½œä¸ºç»„ä»¶<strong>æ ‡è¯†</strong>ï¼Œè€Œä¸æ˜¯åœ¨çˆ¶ç»„ä»¶ UI æ ‘ä¸­çš„ä½ç½®ã€‚</p>
<h2 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h2><p><a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/useReducer">useReducer</a> æ˜¯å¦ä¸€ä¸ªå¯ä»¥ç”¨æ¥ç®¡ç†ç»„ä»¶çŠ¶æ€çš„ Hookï¼Œå®ƒæ˜¯ useState çš„æ›¿ä»£æ–¹æ¡ˆï¼Œç”¨äºå¤„ç†<strong>å¤æ‚çš„çŠ¶æ€é€»è¾‘</strong>ã€‚</p>
<p>ä¸‹é¢å…ˆå†™ä¸€ä¸ªç®€å•çš„ todoListã€‚</p>
<figure class="highlight ts"><figcaption><span>src\components\Task\type.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Task</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">done</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">TaskList</span> = <span class="title class_">Task</span>[];</span><br></pre></td></tr></table></figure>
<figure class="highlight tsx"><figcaption><span>src\components\Task\TaskList.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./TaskList.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TaskItem</span> <span class="keyword">from</span> <span class="string">&quot;./TaskItem&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AddTask</span> <span class="keyword">from</span> <span class="string">&quot;./AddTask&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">Task</span>, <span class="title class_">TaskList</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./type&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">TaskListProps</span> &#123;</span><br><span class="line">  <span class="attr">taskList</span>: <span class="title class_">TaskList</span>;</span><br><span class="line">  <span class="attr">onChangeTask</span>: <span class="function">(<span class="params">task: Task</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">onDeleteTask</span>: <span class="function">(<span class="params">task: Task</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">onAddTask</span>: <span class="function">(<span class="params">task: Task</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TaskList</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  taskList,</span></span><br><span class="line"><span class="params">  onChangeTask,</span></span><br><span class="line"><span class="params">  onDeleteTask,</span></span><br><span class="line"><span class="params">  onAddTask,</span></span><br><span class="line"><span class="params">&#125;: TaskListProps</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;task-list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AddTask</span> <span class="attr">onAddTask</span>=<span class="string">&#123;onAddTask&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">AddTask</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;taskList.map((task) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;task.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">TaskItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">task</span>=<span class="string">&#123;task&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onChange</span>=<span class="string">&#123;onChangeTask&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onDelete</span>=<span class="string">&#123;onDeleteTask&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight tsx"><figcaption><span>src\components\Task\TaskItem.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Task</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./type&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">TaskProps</span> &#123;</span><br><span class="line">  <span class="attr">task</span>: <span class="title class_">Task</span>;</span><br><span class="line">  <span class="attr">onChange</span>: <span class="function">(<span class="params">task: Task</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">onDelete</span>: <span class="function">(<span class="params">task: Task</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TaskItem</span>(<span class="params">&#123; task, onChange, onDelete &#125;: TaskProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [isEdit, setIsEdit] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> [title, setTitle] = <span class="title function_">useState</span>(task.<span class="property">title</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> taskContent = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (isEdit) &#123;</span><br><span class="line">    taskContent = (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;title&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">            setTitle(e.target.value);</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        /&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">            if (!title.trim()) &#123;</span></span><br><span class="line"><span class="language-xml">              return;</span></span><br><span class="line"><span class="language-xml">            &#125;</span></span><br><span class="line"><span class="language-xml">            setIsEdit(false);</span></span><br><span class="line"><span class="language-xml">            onChange(&#123; ...task, title &#125;);</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        &gt;</span></span><br><span class="line"><span class="language-xml">          ä¿å­˜</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">            setIsEdit(false);</span></span><br><span class="line"><span class="language-xml">            setTitle(task.title);</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        &gt;</span></span><br><span class="line"><span class="language-xml">          å–æ¶ˆ</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    taskContent = (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;task.title&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">            setIsEdit(true);</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        &gt;</span></span><br><span class="line"><span class="language-xml">          ç¼–è¾‘</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">checked</span>=<span class="string">&#123;task.done&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          onChange(&#123; ...task, done: !task.done &#125;);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      &#123;taskContent&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          onDelete(task);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        åˆ é™¤</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight tsx"><figcaption><span>src\components\Task\AddTask.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">Task</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./type&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">AddTaskProps</span> &#123;</span><br><span class="line">  <span class="attr">onAddTask</span>: <span class="function">(<span class="params">task: Task</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">AddTask</span>(<span class="params">&#123; onAddTask &#125;: AddTaskProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [title, setTitle] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;title&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          setTitle(e.target.value);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          if (!title.trim()) &#123;</span></span><br><span class="line"><span class="language-xml">            return;</span></span><br><span class="line"><span class="language-xml">          &#125;</span></span><br><span class="line"><span class="language-xml">          onAddTask(&#123; id: Date.now(), title, done: false &#125;);</span></span><br><span class="line"><span class="language-xml">          setTitle(&quot;&quot;);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        æ·»åŠ </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åä½¿ç”¨è¯¥ç»„ä»¶ã€‚</p>
<figure class="highlight tsx"><figcaption><span>src\components\Task\TaskApp.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TaskList</span>, &#123; <span class="title class_">Task</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../Task/TaskList&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&quot;ä»»åŠ¡1&quot;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&quot;ä»»åŠ¡2&quot;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">title</span>: <span class="string">&quot;ä»»åŠ¡3&quot;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">title</span>: <span class="string">&quot;ä»»åŠ¡4&quot;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TaskApp</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [taskList, setTaskList] = useState&lt;<span class="title class_">Task</span>[]&gt;(initialState);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleChangeTask</span>(<span class="params">task: Task</span>) &#123;</span><br><span class="line">    <span class="title function_">setTaskList</span>(</span><br><span class="line">      taskList.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.<span class="property">id</span> === task.<span class="property">id</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> task;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleDeleteTask</span>(<span class="params">task: Task</span>) &#123;</span><br><span class="line">    <span class="title function_">setTaskList</span>(taskList.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">id</span> !== task.<span class="property">id</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleAddTask</span>(<span class="params">task: Task</span>) &#123;</span><br><span class="line">    <span class="title function_">setTaskList</span>([task, ...taskList]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">TaskList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">taskList</span>=<span class="string">&#123;taskList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChangeTask</span>=<span class="string">&#123;handleChangeTask&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onDeleteTask</span>=<span class="string">&#123;handleDeleteTask&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onAddTask</span>=<span class="string">&#123;handleAddTask&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">TaskList</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒhandleChangeTaskã€handleDeleteTaskã€handleAddTask ä¸‰ä¸ªå‡½æ•°éƒ½æ˜¯å¯¹ taskList çš„æ“ä½œã€‚</p>
<p>ç›®å‰å¤„ç†é€»è¾‘è¿˜è¾ƒä¸ºç®€å•ï¼Œä½†éšç€ä¸šåŠ¡é€»è¾‘çš„å¢åŠ ï¼Œè¿™äº›æ“ä½œå¯èƒ½ä¼šå˜å¾—å¤æ‚ï¼Œå¯ä»¥ä½¿ç”¨ <code>useReducer</code> å°†çŠ¶æ€æ“ä½œé€»è¾‘æå–åˆ° <code>reducer</code> å‡½æ•°ä¸­ã€‚</p>
<p>é¦–å…ˆéœ€è¦å‡†å¤‡ä¸€ä¸ª <code>reducer</code> å‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ<strong>å½“å‰çŠ¶æ€</strong>å’Œ <strong>action</strong>ã€‚</p>
<figure class="highlight tsx"><figcaption><span>src\components\Task\TaskApp.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">TaskAction</span> &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;add&quot;</span> | <span class="string">&quot;delete&quot;</span> | <span class="string">&quot;change&quot;</span>;</span><br><span class="line">  <span class="attr">payload</span>: <span class="title class_">Task</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">taskListReducer</span>(<span class="params">taskList: Task[], action: TaskAction</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;add&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> [action.<span class="property">payload</span>, ...taskList];</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;delete&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> taskList.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">id</span> !== action.<span class="property">payload</span>.<span class="property">id</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;change&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> taskList.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.<span class="property">id</span> === action.<span class="property">payload</span>.<span class="property">id</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> action.<span class="property">payload</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> taskList;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†<code>reducer</code> å‡½æ•°å’Œåˆå§‹çŠ¶æ€ä¼ ç»™ <code>useReducer</code>ï¼Œè¿”å›å½“å‰çŠ¶æ€å’Œ <code>dispatch</code> å‡½æ•°ã€‚</p>
<figure class="highlight tsx"><figcaption><span>src\components\Task\TaskApp.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TaskApp</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// const [taskList, setTaskList] = useState&lt;Task[]&gt;(initialTasksList);</span></span><br><span class="line">  <span class="keyword">const</span> [taskList, dispatch] = <span class="title function_">useReducer</span>(taskListReducer, initialTasksList);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleChangeTask</span>(<span class="params">task: Task</span>) &#123;</span><br><span class="line">    <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;change&quot;</span>, <span class="attr">payload</span>: task &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleDeleteTask</span>(<span class="params">task: Task</span>) &#123;</span><br><span class="line">    <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;delete&quot;</span>, <span class="attr">payload</span>: task &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleAddTask</span>(<span class="params">task: Task</span>) &#123;</span><br><span class="line">    <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;add&quot;</span>, <span class="attr">payload</span>: task &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">TaskList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">taskList</span>=<span class="string">&#123;taskList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChangeTask</span>=<span class="string">&#123;handleChangeTask&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onDeleteTask</span>=<span class="string">&#123;handleDeleteTask&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onAddTask</span>=<span class="string">&#123;handleAddTask&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">TaskList</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¼ ç»™ <code>dispatch</code> çš„å¯¹è±¡ï¼Œç§°ä¸º <code>action</code>ï¼Œå®ƒä¼šè¢« <code>reducer</code> å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ¥æ”¶ï¼Œæ˜¯è§¦å‘åŠ¨ä½œçš„æè¿°ï¼Œå¯ä»¥åŒ…å«ä»»æ„å­—æ®µï¼Œé€šå¸¸åŒ…å«ä¸€ä¸ª <code>type</code> å­—æ®µï¼Œç”¨æ¥æè¿°åŠ¨ä½œçš„ç±»å‹ï¼Œä»¥åŠä¸€ä¸ª <code>payload</code> å­—æ®µï¼Œç”¨æ¥ä¼ é€’æ•°æ®ã€‚</p>
<p>ä½¿ç”¨äº† <code>useReducer</code> åï¼Œå¯ä»¥å°†çŠ¶æ€æ“ä½œé€»è¾‘æå–åˆ° <code>reducer</code> å‡½æ•°ä¸­ï¼Œä½¿ç»„ä»¶æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿæ›´å®¹æ˜“æµ‹è¯•å’Œå¤ç”¨ã€‚</p>
<blockquote>
<p>å¯ä»¥ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/immerjs/use-immer#useimmerreducer">useImmerReducer</a> ç»§ç»­ç®€åŒ– reducer å‡½æ•°ï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºæ–°å¯¹è±¡ï¼Œç›´æ¥ä¿®æ”¹ draft å¯¹è±¡ã€‚</p>
</blockquote>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a target="_blank" rel="noopener" href="https://zh-hans.react.dev/">react.dev</a><br><a target="_blank" rel="noopener" href="https://jonny-wei.github.io/blog/react/#%E8%AE%A4%E8%AF%86-jsx">React JSX</a><br><a target="_blank" rel="noopener" href="https://react.iamkasong.com/preparation/jsx.html">ReactæŠ€æœ¯æ­ç§˜</a></p>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>React-è®°-1</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://www.qcqx.cn/article/cb488cbf.html">https://www.qcqx.cn/article/cb488cbf.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>è½»ç¬‘Chuckle</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2024-09-23</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2024-09-23</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><a class="post-meta__tags" href="/tags/React/">React</a></div><div class="post_share"></div></div><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">æŠ• å–‚</span><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/blog/pay/weixin.webp" alt="å¾®ä¿¡" loading="lazy"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/blog/pay/alipay.webp" alt="æ”¯ä»˜å®" loading="lazy"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">èµèµè€…åå•</div><div class="reward-dec">ä¸€ä¸ªåšå®¢ ä¸€å¶å­¤èˆŸ ä¸€æ–¹ä¸–ç•Œ</div></a></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/article/f17dfea3.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/104-0.webp" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">â‡¦ä¸Šä¸€ç¯‡</div><div class="prev_info">React-è®°-2</div></div></a></div><div class="next-post pull-right"><a href="/article/d186ebdd.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/103-4.webp" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡â‡¨</div><div class="next_info">é—­åŒ…ä¸å†…å­˜æ³„æ¼</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/head.webp" data-no-lazy="data-no-lazy" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/404.gif'" alt="avatar"/></div><div class="author-info__name">ã€è½»ç¬‘Chuckleã€</div><div class="author-info__description">æ¼«å¤©å€¾å°˜ é£ä¸­è½»ç¬‘</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">88</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">32</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">6</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/qxchuckle"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://blog.csdn.net/qxchuckle" target="_blank" title="CSDN"><i class="iconfont icon-csdn"></i></a><a class="social-icon" href="https://gitee.com/qxchuckle" target="_blank" title="Gitee"><i class="iconfont icon-gitee"></i></a><a class="social-icon" href="https://space.bilibili.com/353049313" target="_blank" title="bilibili"><i class="iconfont icon-bilibili"></i></a><a class="social-icon" href="https://music.163.com/#/user/home?id=1395730595" target="_blank" title="ç½‘æ˜“äº‘"><i class="iconfont icon-wangyiyunyinle"></i></a><a class="social-icon" href="http://www.coolapk.com/u/4137393" target="_blank" title="é…·å®‰"><i class="iconfont icon-kuan"></i></a></div></div><a class="card-widget" id="card-tuijian" href="https://afdian.net/a/chuckle" target="_blank" style="display:block"><div id="tj-box"><div id="tj-box1"><div id="tj-left"><p>æ‰«ä¸€æ‰«</p>
<span>å¿«é€Ÿæ‰“å¼€ç§»åŠ¨ç«¯â¤</span></div><div id="tj-right"><div id="tj-img-box"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACDUlEQVR42u3bQXKDQAwEQP//084DUpDRasEKbk6uhGB1DrA1O7zejz5eeHh4eHh4eHh4eHh4eHh4eHh4eF/Me8XH0fm/f/7HKME1z2fAw8PDm8BLBko+H13tiLQ2Ax4eHt4c3vlNP1rabvqr6gx4eHh4k3mdBXf+sMHDw8N7Ei+PJI4W2QkVDw8P77/wquckYcT5v2Zc1oKHh4d32QbYFZ8H7e/h4eHhvXeWrpKvTIoFecgbTYWHh4d3Iy8Zol8L2BVP4OHh4U3grW385zf9atU1CT7w8PDw5vOSDbC1saoLcTw8PLw5vOrCt1rPqka3mx8MeHh4eBfzqtWBNXZnHjw8PLzP8pJQtRMr5KWrvBSLh4eHN4eXjFKtFHQYeHh4ePN5+aD5Rlef0Ypx8fDw8C7g5fHrWmi7a8GNh4eHN42X3/rzr99bcsXDw8Obw+sU/atL6uoDYPMGGB4eHt4m3tqRl6vOF9P56wR4eHh403j9aLXzotQaHg8PD++zvLVHQv7btQhjQ3UADw8P7wJe9QbdKpW2X6zCw8PDm8PrRw9r16ku7vHw8PCm8dbKAXncUF06X/IeAx4eHt7tvF21gDwOjkIQPDw8vPG8nN0p9OeRBB4eHt6nePk5/bJUHhbfGuPi4eHhXbYB1q+f7joTDw8P737eMw48PDw8PDw8PDw8PDw8PDw8PDy8L+D9ACjRR+oiJ4qOAAAAAElFTkSuQmCC"/></div></div></div><div id="tj-box2"><div id="tj-left"><p>çˆ±å‘ç”µ</p>
<span>æ‰«ç æˆ–<span class="tj-light">ç‚¹å‡»è·³è½¬</span>â¤</span></div><div id="tj-right"><div id="tj-img-box"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACEElEQVR42u3bQXKDMAwFUO5/6fYAmbRfEhiTPK8YhiR+XtiKJI6fjx4HHh4eHh4eHh4eHh4eHh4eHh4e3hfzjnj88wMvz7x+9t33zOeAh4eHt56XT/31OrmTX/fmiYeHh3cX791GnPCSY+DdFl+dAx4eHt4TeclWXiXh4eHhfSqvGgRXkxR4eHh4z+JNUrTl9MGeuRY8PDy8Cwpg111vUd/Dw8PDC3jVkS9BHlKfMCs8PDy8hbxe60C+cfeSwuWWLzw8PLybeHm6tpfwrR4YeHh4eDvz8ibUKiAJu+ehNh4eHt5KXh7CzstU+fPl78HDw8NbzpuAJ4mG/Eg4uQCGh4eHN+ZNylr5ElxXMMPDw8O7i5ds7tV2qPwI6ZW+8PDw8NbzquWrfMvu3U+WAA8PD28fXu+oOOtIqIbReHh4ePvwJlPptZ/2khR4eHh49/KqbVVRmNsqjCWLjoeHh7cDL5/iJNQ+N3WLh4eHtxuvWhLLExB/H0iX/2PAw8PDG/PKW3ALk0+3dzzg4eHhreQd8chD7XlJ7OQCGB4eHt5l/ZyThMVZjftLcy14eHh4Y97fSYFeeF09fi4JqfHw8PA24FVfmuotXOEVLDw8PLxH8arg5Ek8PDy8p/DmRa9ei391UfDw8PB24OVbc34/b+fqvUiAh4eHdxfvMwYeHh4eHh4eHh4eHh4eHh4eHh7eF/B+Acr1Qv2GlsE8AAAAAElFTkSuQmCC"/></div></div></div></div></a><div class="card-widget card-announcement"><div class="item-headline"><i class="iconfont icon-gonggao"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ¬¢è¿æ¥åˆ°ã€è½»ç¬‘Chuckleã€çš„å°ç«™<br>(ï¿£â–½ï¿£)ï½â– å¹²æ¯â–¡ï½(ï¿£â–½ï¿£)<br>å¦‚æœæœ‰ä»€ä¹ˆåŠ è½½ä¸å‡ºæ¥æˆ–è€…å…¶å®ƒæ»´å°bug,ã€Œåˆ·æ–°ç½‘é¡µ/Ctrl+F5ã€åº”è¯¥ã€ä¹Ÿè®¸èƒ½è§£å†³</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B"><span class="toc-number">2.</span> <span class="toc-text">å¼€å§‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JSX-amp-TSX-%E7%AE%80%E4%BB%8B"><span class="toc-number">3.</span> <span class="toc-text">JSX &amp; TSX ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JSX-%E4%B8%8E-React"><span class="toc-number">3.1.</span> <span class="toc-text">JSX ä¸ React</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E8%AF%86-React-%E7%BB%84%E4%BB%B6"><span class="toc-number">3.2.</span> <span class="toc-text">åˆè¯† React ç»„ä»¶</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JSX-%E8%AF%AD%E6%B3%95"><span class="toc-number">4.</span> <span class="toc-text">JSX è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE%E8%A7%84%E5%88%99"><span class="toc-number">4.1.</span> <span class="toc-text">æ ‡ç­¾è§„åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E5%80%BC%E8%AF%AD%E6%B3%95"><span class="toc-number">4.2.</span> <span class="toc-text">æ’å€¼è¯­æ³• {}</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E4%B8%8E%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">4.3.</span> <span class="toc-text">æ¡ä»¶ä¸åˆ—è¡¨æ¸²æŸ“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%94%E8%AF%A5%E5%85%88%E4%BA%86%E8%A7%A3%E7%9A%84%E4%B8%9C%E8%A5%BF"><span class="toc-number">5.</span> <span class="toc-text">åº”è¯¥å…ˆäº†è§£çš„ä¸œè¥¿</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%BA%AF%E5%87%BD%E6%95%B0"><span class="toc-number">5.1.</span> <span class="toc-text">ä½¿ç”¨çº¯å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91%E7%BB%93%E6%9E%84-UI"><span class="toc-number">5.2.</span> <span class="toc-text">æ ‘ç»“æ„ UI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E6%B8%B2%E6%9F%93"><span class="toc-number">5.3.</span> <span class="toc-text">React æ¸²æŸ“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#props-%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-number">6.</span> <span class="toc-text">props ç»„ä»¶ä¼ å‚</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">6.1.</span> <span class="toc-text">å…„å¼Ÿç»„ä»¶é€šä¿¡</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#React-%E4%BA%8B%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">React äº‹ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#state-%E7%BB%84%E4%BB%B6%E7%8A%B6%E6%80%81"><span class="toc-number">8.</span> <span class="toc-text">state ç»„ä»¶çŠ¶æ€</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%83%B0%E6%80%A7%E5%88%9D%E5%A7%8B%E5%8C%96%E5%87%BD%E6%95%B0"><span class="toc-number">8.1.</span> <span class="toc-text">æƒ°æ€§åˆå§‹åŒ–å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E6%9B%B4%E6%96%B0"><span class="toc-number">8.2.</span> <span class="toc-text">å‡½æ•°å¼æ›´æ–°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Immer-%E5%BA%93"><span class="toc-number">8.3.</span> <span class="toc-text">Immer åº“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E5%A5%BD%E5%9C%B0%E7%AE%A1%E7%90%86%E7%8A%B6%E6%80%81"><span class="toc-number">8.4.</span> <span class="toc-text">æ›´å¥½åœ°ç®¡ç†çŠ¶æ€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%9A%84%E4%BF%9D%E7%95%99%E3%80%81%E9%87%8D%E7%BD%AE"><span class="toc-number">8.5.</span> <span class="toc-text">çŠ¶æ€çš„ä¿ç•™ã€é‡ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useReducer"><span class="toc-number">8.6.</span> <span class="toc-text">useReducer</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">9.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol></div></div><div class="card-widget card-recommend-post"><div class="item-headline"><i class="fas fa-dharmachakra"></i><span>ç›¸å…³æ¨è</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/article/55cefeb1.html" title="React-è®°-3"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/104-0.webp" alt="React-è®°-3"></a><div class="content"><a class="title" href="/article/55cefeb1.html" title="React-è®°-3">React-è®°-3</a><time datetime="2024-10-13" title="å‘è¡¨äº 2024-10-13">2024-10-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/f17dfea3.html" title="React-è®°-2"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/104-0.webp" alt="React-è®°-2"></a><div class="content"><a class="title" href="/article/f17dfea3.html" title="React-è®°-2">React-è®°-2</a><time datetime="2024-09-26" title="å‘è¡¨äº 2024-09-26">2024-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/d186ebdd.html" title="é—­åŒ…ä¸å†…å­˜æ³„æ¼"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/103-4.webp" alt="é—­åŒ…ä¸å†…å­˜æ³„æ¼"></a><div class="content"><a class="title" href="/article/d186ebdd.html" title="é—­åŒ…ä¸å†…å­˜æ³„æ¼">é—­åŒ…ä¸å†…å­˜æ³„æ¼</a><time datetime="2024-09-12" title="å‘è¡¨äº 2024-09-12">2024-09-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/d22c87fc.html" title="Vue3.5 æ›´æ–°äº†å•¥"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/102-0.webp" alt="Vue3.5 æ›´æ–°äº†å•¥"></a><div class="content"><a class="title" href="/article/d22c87fc.html" title="Vue3.5 æ›´æ–°äº†å•¥">Vue3.5 æ›´æ–°äº†å•¥</a><time datetime="2024-09-12" title="å‘è¡¨äº 2024-09-12">2024-09-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/93c63660.html" title="Git lint ç›¸å…³"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/1.webp" alt="Git lint ç›¸å…³"></a><div class="content"><a class="title" href="/article/93c63660.html" title="Git lint ç›¸å…³">Git lint ç›¸å…³</a><time datetime="2024-09-10" title="å‘è¡¨äº 2024-09-10">2024-09-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/b2086eb9.html" title="é›†æˆ lint ä»£ç è§„èŒƒå·¥å…·"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/1.webp" alt="é›†æˆ lint ä»£ç è§„èŒƒå·¥å…·"></a><div class="content"><a class="title" href="/article/b2086eb9.html" title="é›†æˆ lint ä»£ç è§„èŒƒå·¥å…·">é›†æˆ lint ä»£ç è§„èŒƒå·¥å…·</a><time datetime="2024-09-08" title="å‘è¡¨äº 2024-09-08">2024-09-08</time></div></div></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€è¿‘æ›´æ–°</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/article/1be64a8d.html" title="NestJSå®è·µæ‚è®°"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/77-0.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/404.jpg'" alt="NestJSå®è·µæ‚è®°"/></a><div class="content"><a class="title" href="/article/1be64a8d.html" title="NestJSå®è·µæ‚è®°">NestJSå®è·µæ‚è®°</a><time datetime="2024-12-09T07:10:08.000Z" title="æ›´æ–°äº 2024-12-09 15:10:08">2024-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/55cefeb1.html" title="React-è®°-3"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/104-0.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/404.jpg'" alt="React-è®°-3"/></a><div class="content"><a class="title" href="/article/55cefeb1.html" title="React-è®°-3">React-è®°-3</a><time datetime="2024-10-12T17:26:31.000Z" title="æ›´æ–°äº 2024-10-13 01:26:31">2024-10-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/f17dfea3.html" title="React-è®°-2"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/104-0.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/404.jpg'" alt="React-è®°-2"/></a><div class="content"><a class="title" href="/article/f17dfea3.html" title="React-è®°-2">React-è®°-2</a><time datetime="2024-09-26T11:26:24.000Z" title="æ›´æ–°äº 2024-09-26 19:26:24">2024-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/cb488cbf.html" title="React-è®°-1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/104-0.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/404.jpg'" alt="React-è®°-1"/></a><div class="content"><a class="title" href="/article/cb488cbf.html" title="React-è®°-1">React-è®°-1</a><time datetime="2024-09-23T13:15:26.000Z" title="æ›´æ–°äº 2024-09-23 21:15:26">2024-09-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/d186ebdd.html" title="é—­åŒ…ä¸å†…å­˜æ³„æ¼"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/images/103-4.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/404.jpg'" alt="é—­åŒ…ä¸å†…å­˜æ³„æ¼"/></a><div class="content"><a class="title" href="/article/d186ebdd.html" title="é—­åŒ…ä¸å†…å­˜æ³„æ¼">é—­åŒ…ä¸å†…å­˜æ³„æ¼</a><time datetime="2024-09-12T12:04:03.000Z" title="æ›´æ–°äº 2024-09-12 20:04:03">2024-09-12</time></div></div></div></div></div></div></main><footer id="footer" style="background: rgba(0, 0, 0, 0);"><div id="footer-wrap"><div id="footer_icon"><div class="icon_left"><a class="icon_link" target="_blank" href="http://foreverblog.cn/go.html" rel="noopener external nofollow" title="è™«æ´-éšæœºè®¿é—®åå¹´ä¹‹çº¦æˆå‘˜åšå®¢"><i class="fa-solid fa-circle-notch fa-fw"></i></a><a class="icon_link" target="_blank" href="https://travellings.cn" rel="noopener external nofollow" title="å¼€å¾€-éšæœºè·³è½¬åˆ°å¦ä¸€ä¸ªåŠ å…¥å¼€å¾€çš„ç½‘é¡µ"><i class="fa-solid fa-subway fa-fw"></i></a><a class="icon_link" href="/link/" title="å‹é“¾"><i class="fa-solid fa-link fa-fw"></i></a><a class="icon_link" href="/messageboard/" title="ç•™è¨€"><i class="fa-regular fa-comment fa-fw"></i></a></div><img class="footer_logo entered loaded" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/head.webp" onclick="btf.scrollToDest(0,500)" title="è¿”å›é¡¶éƒ¨"/><div class="icon_left"><a class="icon_link" target="_blank" rel="noopener" href="https://www.qcqx.cn/" title="æˆ‘çš„ä¸»é¡µ"><i class="fa-solid fa-compass fa-fw"></i></a><a class="icon_link" target="_blank" href="https://res.abeim.cn/api/qq/?qq=1934009145" rel="noopener external nofollow" title="è”ç³»QQ"><i class="fa-brands fa-qq fa-fw"></i></a><a class="icon_link" target="_blank" href="https://github.com/qxchuckle" rel="noopener external nofollow" title="æˆ‘çš„Githubä¸»é¡µ"><i class="fa-brands fa-github fa-fw"></i></a><a class="icon_link" href="mailto:chuckle@chuckle.top" rel="noopener external nofollow" title="é‚®ä»¶è”ç³»"><i class="fa-solid fa-envelope fa-fw"></i></a></div></div><div class="copyright">&copy;2022 - 2026 By ã€è½»ç¬‘Chuckleã€<a id="beianhao" style="color:#fff;font-size:0.9rem;font-weight:400;" href="https://beian.miit.gov.cn/" target="_blank">ç²¤ICPå¤‡2022076449å·</a></div><div class="footer_custom_text">ã€Another branch will grow and flourish in the futureã€</div><div class="footer-banner"><div id="footer-banner-time"><span id="timeDate">è½½å…¥å¤©æ•°...</span><span id="times">è½½å…¥æ—¶åˆ†ç§’...</span><script>if(! (navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))){
function createtime() {
var now = new Date();
var grt= new Date("03/10/2022 00:00:00");
now.setTime(now.getTime()+1000);
days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
document.getElementById("timeDate").innerHTML = "è‡ª 2022-3-10 å»ºç«™ä»¥æ¥ï¼Œå°ç«™å·²è‹Ÿæ´» "+dnum+" å¤© ";
document.getElementById("times").innerHTML = hnum + " æ—¶ " + mnum + " åˆ† ( =â€¢Ï‰â€¢= )m";
}
createtime();
if(typeof footer_time == "undefined"){
  var footer_time = setInterval("createtime()",1000*60);
}else{
  clearInterval(footer_time);
  footer_time = setInterval("createtime()",1000*60);
}
}
</script></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/hexo.svg"/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/butterfly.svg"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/github.svg"/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20220160" style="margin-inline:5px"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/20220160.svg"/></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/" style="margin-inline:5px"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/2022076449.svg"/></a><a class="github-badge" target="_blank" href="https://cloud.tencent.com/" style="margin-inline:5px"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/tx.svg"/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/vercel.svg"/></a><a class="github-badge" target="_blank" href="https://tianli-blog.club/jsd/" style="margin-inline:5px"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/tianlicdn.svg"/></a><a class="github-badge" target="_blank" href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" style="margin-inline:5px"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/ypy.svg"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/img/cc.svg"/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="refresh-cache" type="button" title="åˆ·æ–°ç¼“å­˜" onclick="refreshCache()"><i class="fas fa-refresh fa-spin"></i></button><button id="enlargePage-btn" type="button" title="æ”¾å¤§é¡µé¢" onclick="enlargePage()"><i class="fa fa-plus"></i></button><button id="narrowPage-btn" type="button" title="ç¼©å°é¡µé¢" onclick="narrowPage()"><i class="fa fa-minus"></i></button><button type="button" title="åˆ‡æ¢èƒŒæ™¯" onclick="toggleWinbox()"><i class="fa fa-images"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="to_comment" type="button" title="ç›´è¾¾è¯„è®º" onclick="FixedCommentBtn();"><i class="fas fa-comments"></i></button><button id="share-link" type="button" title="åˆ†äº«é“¾æ¥"><i class="fa fa-share-alt"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœ¬åœ°æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="fa-solid fa-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="fa-solid fa-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="fa-solid fa-arrow-rotate-right"></i></div><div class="rightMenu-item" id="menu-top"><i class="fa fa-angles-up"></i></div></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:kk.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-magnifying-glass"></i><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-read"><a class="rightMenu-item" href="javascript:kk.pasteText();"><i class="fa fa-paste"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" id="menu-radompage" href="/"><i class="fa-solid fa-shoe-prints"></i><span>åšå®¢ä¸»é¡µ</span></a><div class="rightMenu-item" id="menu-darkmode"><i class="fa-solid fa-adjust"></i><span>æ˜¼å¤œåˆ‡æ¢</span></div><div class="rightMenu-item" id="share-chuckle"><i class="fa fa-share-alt"></i><span>åˆ†äº«æœ¬é¡µ</span></div><a class="rightMenu-item" id="menu-radompage" href="/categories/"><i class="fa fa-archive"></i><span>åˆ†ç±»</span></a><a class="rightMenu-item" id="menu-radompage" href="/tags/"><i class="fa fa-tags"></i><span>æ ‡ç­¾</span></a></div></div><div id="rightmenu-mask" onclick="RemoveRightMenu()"></div><div><script src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/js/utils.js"></script><script src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/js/main.js?6"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/js/search/local-search.js?2"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 2500);</script><div class="js-pjax"><script>function loadWaline () {
  function initWaline () {
    const waline = new Waline(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://waline.qcqx.cn',
      path: location.pathname,
      visitor: true,
      dark: 'html[data-theme="dark"]'
    }, {"requiredMeta":["nick","mail"],"wordLimit":400,"placeholder":"æ¥è¯„è®ºäº¤æµå§ï¼Œé€šè¿‡é‚®ä»¶é€šçŸ¥ï¼ˆè¡¨æƒ…ç‚¹ä¸å‡ºæ¥è¯·åˆ·æ–°é¡µé¢ï¼‰"}))
  }

  if (typeof Waline === 'function') initWaline()
  else getScript('https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/js/waline.min.js?7').then(initWaline)
}

if ('Waline' === 'Waline' || !false) {
  if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><script src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/js/qx-tracker.min.js?1"></script><script>const tracker = new Tracker({requestUrl:'https://tracker-api.qcqx.cn/api/tracker',historyTracker:true,realTime:true});</script><script defer="true" src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/random.min.js?14"></script><script defer="true" src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/js/chuckle.js?15"></script><script src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/js/chuckle-post-ai.js?11"></script><script defer>new ChucklePostAI({el:'#post>#article-container',key:'tN2jLmG7fX9zHk5dVbQr',title_el:'.post-title',rec_method:'web',whitelist:['article/17d3383a.html'],pjax:true})</script><script src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/js/pjax.min.js"></script><script>let pjaxSelectors = ["title","#config-diff","#body-wrap","#fixedcard-dashboard","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><div id="fixedcard-dashboard"><button class="fixedcard-activebtn" type="button" title="ç”¨æˆ·ä¿¡æ¯" onclick="FixedCardWidget(&quot;class&quot;,&quot;card-info&quot;,&quot;0&quot;)"><i class="fas fa-address-book"></i></button><button class="fixedcard-activebtn" type="button" title="å…¬å‘Š" onclick="FixedCardWidget(&quot;class&quot;,&quot;card-announcement&quot;,&quot;0&quot;)"><i class="fa fa-bullhorn"></i></button><button class="fixedcard-activebtn" type="button" title="ç›¸å…³æ¨è" onclick="FixedCardWidget(&quot;class&quot;,&quot;card-recommend-post&quot;,&quot;0&quot;)"><i class="fas fa-dharmachakra"></i></button><button class="fixedcard-activebtn" type="button" title="æœ€è¿‘æ›´æ–°" onclick="FixedCardWidget(&quot;class&quot;,&quot;card-recent-post&quot;,&quot;0&quot;)"><i class="fas fa-history"></i></button><div class="fixedcard-user-avatar fixedcard-activebtn" onclick="RemoveFixedCardWidget()"><img class="fixedcard-user-avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/head.webp" title="ã€è½»ç¬‘Chuckleã€"></div></div></div><!-- hexo injector body_end start --><script data-pjax>function hope_light_loader_injector_config(){
                var parent_div_git = document.getElementById('body-wrap');
                var item_html = '<div id="loading-bar-wrapper">';
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // æ— æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // æœ‰æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
            }if( document.getElementById('body-wrap') && (location.pathname ==='all'|| 'all' ==='all')){
            hope_light_loader_injector_config()
        } </script>
    <script src="https://cdn.jsdelivr.net/gh/qxchuckle/qxchuckle.github.io/js/nprogress.min.js"></script>
    <script>NProgress.configure({parent:"#loading-bar-wrapper",trickleSpeed: 100})</script></div>
    <script data-pjax>
      window.ShowLoading = function() {
        NProgress.start();
      };
      window.HideLoading = function() {
        NProgress.done();
      }
      document.addEventListener('pjax:send', window.ShowLoading)
      document.addEventListener('pjax:success', window.HideLoading)
      document.addEventListener('pjax:error', window.HideLoading)
    </script>
<!-- hexo injector body_end end --></body></html>